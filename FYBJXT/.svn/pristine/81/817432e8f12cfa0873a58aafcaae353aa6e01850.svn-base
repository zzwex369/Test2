<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
		  xmlns:s="library://ns.adobe.com/flex/spark"
		  xmlns:mx="library://ns.adobe.com/flex/mx"
		  xmlns:component="com.xyw.sys.custom.component.*"
		  width="1270" height="690" creationComplete="creationCompleteHandler(event)">
	
	
	
	<fx:Declarations>
		<s:RemoteObject id="systemService" destination="systemService" endpoint="{this.parentApplication.contextRoot}/messagebroker/amf" showBusyCursor="true">
			<s:method name="getComboBoxData" result="getComboBoxDataHandler(event)"/>
		</s:RemoteObject>
		
		<s:RemoteObject id="f605Service" destination="f605Service" endpoint="{this.parentApplication.contextRoot}/messagebroker/amf" showBusyCursor="true">
			<s:method name="renewF605" result="saveOrRenewF605Handler(event)" />
			<s:method name="saveF605" result="saveOrRenewF605Handler(event)" />
		</s:RemoteObject>
		
	</fx:Declarations>
	<fx:Metadata>
		[Event(name="saveSuccess", type="flash.events.Event")]
	</fx:Metadata>
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		.mySize
		{
			fontSize:12px;
		}
		.must 
		{
			color:red;
			fontSize:20px;
			fontWeight:bold;
			paddingTop:5px;
		}
		
		.pf8
		{
			paddingLeft:8px;
		}
		.textInput{
			skinClass:ClassReference("com.xyw.sys.custom.skin.CustomTextInputSkin");
		}  
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import com.xyw.module.msss.fnbj.model.F605;
			import com.xyw.module.msss.fnbj.model.F605Request;
			import com.xyw.sys.custom.component.CompMethod;
			import com.xyw.sys.model.ComboBoxDataRequest;
			import com.xyw.sys.model.SystemUser;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.controls.DateField;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.rpc.events.ResultEvent;
			import mx.utils.StringUtil;
			
			import spark.events.TextOperationEvent;
			private var comboBoxDataRequest:ComboBoxDataRequest;
			private var systemUser:SystemUser;
			[Bindable]
			public var modify:Boolean=false;//是否修改
			public var f60501:String;//
			[Bindable]
			public var vf605:Object;
			private function _initializeComboBox(sql:String,flag:String,showPrompt:Boolean=false):void
			{
				comboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.sql = sql;
				comboBoxDataRequest.flag = flag;
				comboBoxDataRequest.showPrompt = showPrompt;
				this.systemService.getComboBoxData(this.comboBoxDataRequest);
			}
			
			private function creationCompleteHandler(event:FlexEvent):void
			{
				this.systemUser =this.parentApplication.systemUser;
				
				this.initializeComboBox();
				//检查读卡权限
				if(this.systemUser.duka == "1"){
					this.duka1.enabled = true;
				}
			}
			
			/**
			 *
			 */
			private function initializeComboBox():void
			{
				
				_initializeComboBox("select * from S301_06","S301_06");
				
				
			}
			
			private function getComboBoxDataHandler(event:ResultEvent):void
			{
				var comboBoxDataResponse:Object =event.result;
				var flag:String =comboBoxDataResponse.flag;
				var comboBoxDataList:ArrayCollection =comboBoxDataResponse.comboBoxDataList;
				
				if(flag == "S301_06")
				{
					this.F605_06.dataProvider = comboBoxDataList;
					this.F605_06.selectedIndex = 0;
					
				}else if(flag == "S301_10_01")
				{
					this.F605_43.dataProvider = comboBoxDataList;
					this.F605_43.selectedIndex = 0;
					return ;
					
				}else if(flag == "F601")
				{
					if(comboBoxDataList.length)
					{
						var obj:Object=comboBoxDataList.getItemAt(0);
						Alert.show('该信息已被'+obj.label+'于'+obj.data
							+'使用  ,不能选择未进行唐筛选项 ！','系统提示');
						F605_11_01.selected=false;
					}
					saveButton.enabled=true;
				}
				if(modify)
					callLater(loadF605);
				else
					_initializeComboBox("select t.s_01,t.s_02 from S301_10 t " +
						"where t.S_05='5' and t.S_04 ="+this.systemUser.userCode,"S301_10_01");
			}
			
			
			
			/**
			 *
			 */
			private function loadF605():void
			{
				
				var splitArr:Array;
				F605_03.text=vf605.f60503;
				F605_05.text=vf605.f60505;
				F605_07.text=vf605.f60507;
				F605_09.text=vf605.f60509;			
				F605_15.text=vf605.f60515;
				splitArr=vf605.f60516.split(',')
				F605_16_1.text=splitArr[0];
				F605_16_2.text=splitArr[1];
				F605_18.text=vf605.f60518;
				F605_19.text=vf605.f60519;
				F605_20.text=vf605.f60520;
				F605_22.text=vf605.f60522;
				F605_24.text=vf605.f60524;
				F605_26.text=vf605.f60526;
				F605_29.text=vf605.f60529;
				F605_35.text=vf605.f60535;
				F605_37.text=vf605.f60537;
				F605_39.text=vf605.f60539;
				F605_43.text=vf605.f60543;
				splitArr=vf605.f60577.split(',')
				F605_77_1.text=splitArr[0];
				F605_77_2.text=splitArr[1];
				
				CompMethod.setRadioButtonSelect(F605_10,vf605.f60510);
				CompMethod.setRadioButtonSelect(F605_17,vf605.f60517);
				CompMethod.setRadioButtonSelect(F605_21,vf605.f60521);
				CompMethod.setRadioButtonSelect(F605_23,vf605.f60523);
				CompMethod.setRadioButtonSelect(F605_25,vf605.f60525);
				CompMethod.setRadioButtonSelect(F605_27,vf605.f60527);
				CompMethod.setRadioButtonSelect(F605_28,vf605.f60528);
				CompMethod.setRadioButtonSelect(F605_32,vf605.f60532);
				CompMethod.setRadioButtonSelect(F605_34,vf605.f60534);
				CompMethod.setRadioButtonSelect(F605_36,vf605.f60536);
				CompMethod.setRadioButtonSelect(F605_38,vf605.f60538);
				CompMethod.setRadioButtonSelect(F605_75,vf605.f60575);
				CompMethod.setRadioButtonSelect(F605_78,vf605.f60578);
				
				
				F605_08.text=DateField.dateToString(vf605.f60508,'YYYY-MM-DD');
				F605_14.text=DateField.dateToString(vf605.f60514,'YYYY-MM-DD');
				F605_30.text=DateField.dateToString(vf605.f60530,'YYYY-MM-DD');
				F605_33.text=DateField.dateToString(vf605.f60533,'YYYY-MM-DD');
				F605_42.text=DateField.dateToString(vf605.f60542,'YYYY-MM-DD');
				F605_76.text=DateField.dateToString(vf605.f60576,'YYYY-MM-DD');
				F605_79.text=DateField.dateToString(vf605.f60579,'YYYY-MM-DD');
				F605_80.text=DateField.dateToString(vf605.f60580,'YYYY-MM-DD');
				if(vf605.f60510=='3')
				{
					F605_33H.text=vf605.f60533.hours;
					F605_33M.text=vf605.f60533.minutes;
				}
				
				
				CompMethod.setCheckBoxAutomationName([F605_11_1,F605_11_2],vf605.f60511)
				
				F605_06.selectedIndex=CompMethod.getDropDownListSelectedIndex(F605_06.dataProvider,vf605.f60506);
				F605_31.selectedIndex=CompMethod.getDropDownListSelectedIndex(F605_31.dataProvider,vf605.f60531);
				F605_41.selectedIndex=CompMethod.getDropDownListSelectedIndex(F605_41.dataProvider,vf605.f60541);
				
			}
			
			
			private function AreaComboBox_creationCompleteHandler(id:Object,areaCode:String):void
			{
				
				id.setAreaCode(areaCode);
			}
			
			/**
			 *
			 */
			private function validate():void
			{
				var f60511Arr:Array=CompMethod.getCheckBoxAutomationName([F605_11_1,F605_11_2]);
				if(!F605_05.text)
				{
					Alert.show("请输入姓名","系统提示");
					return;
				}
				if(!validateF601_06())
					return ;
				if(!F605_08.text)
				{
					Alert.show("请输入出生日期","系统提示");
					return;
				}
				if(!F605_09.text)
				{
					Alert.show("请输入联系电话","系统提示");
					return;
				}
				if(F605_75_1.selected)
				{
					if(!F605_14.text)
					{
						Alert.show("请输入末次月经","系统提示");
						return;
					}
					
					if(!F605_15.text)
					{
						Alert.show("请输入月经周期","系统提示");
						return;
					}
					if(!F605_16_1.text||!F605_16_2.text)
					{
						Alert.show("请输入孕周","系统提示");
						return;
					}
					if(!isConformYZ(F605_16_1))
					{
						Alert.show("免费或者报销 孕周范围必须在18-24周范围","系统提示");
						return;
					}
					
				}
				if(F605_75_4.selected)
				{
					if(!F605_76.text)
					{
						Alert.show("请输入B超孕周日期","系统提示");
						return;
					}
					
					
					if(!F605_77_1.text||!F605_77_2.text)
					{
						Alert.show("请输入B超孕周","系统提示");
						return;
					}
					
					if(!isConformYZ(F605_77_1))
					{
						Alert.show("免费或者报销 B超孕周范围在18-24周范围","系统提示");
						return;
					}
					
				}
				
				if(F605_75_5.selected)
				{
					if(!F605_79.text)
					{
						Alert.show("请输入辅助生殖取卵时间","系统提示");
						return;
					}
					
					if(!F605_80.text)
					{
						Alert.show("请输入生殖植入时间","系统提示");
						return;
					}
					
					
				}
				
				if(!F605_18.text)
				{
					Alert.show("请输入本次胎数","系统提示");
					return;
				}
				if(!F605_19.text)
				{
					Alert.show("请输入胎次","系统提示");
					return;
				}
				if(!F605_20.text)
				{
					Alert.show("请输入产次","系统提示");
					return;
				}
				if(Number(F605_20.text)-Number(F605_19.text)>0)
				{
					Alert.show("产次不能大于胎次！","系统提示");
					return;
				}
				if(!F605_31.selectedItem)
				{
					Alert.show("请选择产诊机构！","系统提示");
					return;
				}
				if(F605_12.getAreaCode().substr(0,4)!="4113")
				{
					Alert.show("现地址请选择南阳市地址","系统提示");
					return ;
				}
				if(!CompMethod.validateAreaCode(F605_12.getAreaCode(),'4113'))
				{
					Alert.show("现地址选择到最下级","系统提示");
					return ;
				}
				if(!CompMethod.validateAreaCode(F605_13.getAreaCode(),"4113",true))
				{
					Alert.show("户口地址请选择到乡镇","系统提示");
					return ;
				}
				if(!f60511Arr[0])
				{
					Alert.show("请选择免费类型","系统提示");
					return;
				}
				if(F605_22.enabled&&!F605_22.text)
				{
					Alert.show("请输入不良孕产史说明","系统提示");
					return;
				}
				if(F605_24.enabled&&!F605_24.text)
				{
					Alert.show("请输入孕期不良接触史说明","系统提示");
					return;
				}
				if(F605_26.enabled&&!F605_26.text)
				{
					Alert.show("请输入孕期服药史说明","系统提示");
					return;
				}
				if(F605_29.enabled&&!F605_29.text)
				{
					Alert.show("请输入家族遗传病史说明","系统提示");
					return;
				}
				if(F605_10_3.selected)
				{
					if(F605_35.enabled&&!F605_35.text)
					{
						Alert.show("请输入染色体核型分析异常","系统提示");
						return;
					}
					if(F605_37.enabled&&!F605_37.text)
					{
						Alert.show("请输入单基因遗传病检测异常","系统提示");
						return;
					}
					if(F605_39.enabled&&!F605_39.text)
					{
						Alert.show("请输入检测方法其他","系统提示");
						return;
					}
					
					if(!F605_33.text)
					{
						Alert.show("请输入样本采集日期","系统提示");
						return;
					}
					
					if(!F605_33H.text)
					{
						Alert.show("请输入样本采集日期小时","系统提示");
						return;
					}
					
					if(!F605_33M.text)
					{
						Alert.show("请输入样本采集日期分钟","系统提示");
						return;
					}
					var time:Number=Number(F605_33H.text);
					if(time>23)
					{
						Alert.show("标本采集小时必须在0-23之间","系统提示");
						return;
					}
					
					time=Number(F605_33M.text);
					if(time>59)
					{
						Alert.show("标本采集分钟必须在0-59之间","系统提示");
						return;
					}
					
					if(!F605_30.text)
					{
						Alert.show("请输入产前诊断日期","系统提示");
						return;
					}
					
				}
				
				if(!F605_43.text)
				{
					Alert.show("请输入申请医生","系统提示");
					return;
				}
				saveF605(f60511Arr[1]);
				
			}
			
			/**
			 * 满足孕周条件
			 * 免费，的限制孕周18-24周
			 *  报销自费的不限制  
			 *  true 符合孕周  false 不符合孕周标准
			 */
			private function isConformYZ(yzVal:TextInput):Boolean
			{
				var result:Boolean=true;
				if(F605_10_1.selected)	
				{
					var yz:Number=Number(yzVal.text);
					if(yz<18||yz>24)
						result=false; 
				}
				return result;
			}
			
			/**
			 *
			 */
			private function saveF605(f60511:String):void
			{
				saveButton.enabled=false;
				var f605:F605=new F605();
				f605.f60511=f60511;
				f605.f60540='2';
				f605.f60512=F605_12.getAreaCode();
				f605.f60513=F605_13.getAreaCode();
				
				f605.f60506=F605_06.selectedItem.data;
				f605.f60531=F605_31.selectedItem.data;
				f605.f60541=F605_41.selectedItem.data;
				
				f605.f60503=StringUtil.trim(F605_03.text);
				f605.f60505=StringUtil.trim(F605_05.text);
				f605.f60507=StringUtil.trim(F605_07.text);
				f605.f60509=StringUtil.trim(F605_09.text);
				f605.f60515=StringUtil.trim(F605_15.text);
				f605.f60518=StringUtil.trim(F605_18.text);
				f605.f60519=StringUtil.trim(F605_19.text);
				f605.f60520=StringUtil.trim(F605_20.text);
				f605.f60522=StringUtil.trim(F605_22.text);
				f605.f60524=StringUtil.trim(F605_24.text);
				f605.f60526=StringUtil.trim(F605_26.text);			
				f605.f60529=StringUtil.trim(F605_29.text);
				f605.f60535=StringUtil.trim(F605_35.text);
				f605.f60537=StringUtil.trim(F605_37.text);
				f605.f60539=StringUtil.trim(F605_39.text);
				f605.f60543=StringUtil.trim(F605_43.text);
				
				f605.f60516=StringUtil.trim(F605_16_1.text)+','+StringUtil.trim(F605_16_2.text);
				f605.f60577=StringUtil.trim(F605_77_1.text)+','+StringUtil.trim(F605_77_2.text);
				
				
				f605.f60510=CompMethod.getRadioButtonValue(F605_10);
				f605.f60517=CompMethod.getRadioButtonValue(F605_17);
				f605.f60521=CompMethod.getRadioButtonValue(F605_21);
				f605.f60523=CompMethod.getRadioButtonValue(F605_23);
				f605.f60525=CompMethod.getRadioButtonValue(F605_25);
				f605.f60527=CompMethod.getRadioButtonValue(F605_27);
				f605.f60528=CompMethod.getRadioButtonValue(F605_28);
				f605.f60532=CompMethod.getRadioButtonValue(F605_32);
				f605.f60534=CompMethod.getRadioButtonValue(F605_34);
				f605.f60536=CompMethod.getRadioButtonValue(F605_36);
				f605.f60538=CompMethod.getRadioButtonValue(F605_38);
				f605.f60575=CompMethod.getRadioButtonValue(F605_75);
				f605.f60578=CompMethod.getRadioButtonValue(F605_78);
				
				
				f605.f60508=DateField.stringToDate(F605_08.text,'YYYY-MM-DD');
				f605.f60514=DateField.stringToDate(F605_14.text,'YYYY-MM-DD');
				f605.f60530=DateField.stringToDate(F605_30.text,'YYYY-MM-DD');
				f605.f60533=DateField.stringToDate(F605_33.text,'YYYY-MM-DD');
				f605.f60542=DateField.stringToDate(F605_42.text,'YYYY-MM-DD');
				f605.f60576=DateField.stringToDate(F605_76.text,'YYYY-MM-DD');
				f605.f60579=DateField.stringToDate(F605_79.text,'YYYY-MM-DD');
				f605.f60580=DateField.stringToDate(F605_80.text,'YYYY-MM-DD');
				if(f605.f60510=='3')
				{
					f605.f60533.hours=Number(F605_33H.text);
					f605.f60533.minutes=Number(F605_33M.text);
				}
				
				if(modify)
				{
					f605.f60501=this.vf605.f60501;
					f605.f60502=this.vf605.f60502;
					f605.f60504=this.vf605.f60504;
					f605Service.renewF605(f605);
					
				}else
					f605Service.saveF605(f605);
				
				
			}
			
			private function checkbox1_changeHandler(event:Event):void
			{
				if(event.target.selected&&validateF601_06())
				{
					saveButton.enabled=false;
					_initializeComboBox("select to_char(f601_34,'yyyy-MM-dd'),f601_29_zh from v_f601 t where f601_04='"+
						StringUtil.trim(F605_07.text)+"'","F601");				
				}else
					event.target.selected=false;
			}
			
			/**
			 *
			 */
			private function validateF601_06():Boolean
			{
				if(!F605_07.text)
				{
					Alert.show("请输入证件号码!","系统提示");
					return false;
				}
				
				if(!F605_06.selectedIndex)
				{
					var patternMonther:RegExp = /^(\d{18,18}|\d{15,15}|\d{17,17}X|\d{17,17}x)$/g;
					if(!patternMonther.test(StringUtil.trim(F605_07.text)))
					{
						Alert.show("身份证号码有误!","系统提示");
						return false;
					}
					
				}
				return true;
			}
			
			private function saveOrRenewF605Handler(event:ResultEvent):void
			{
				var f605Response:Object=event.result;
				if(f605Response.state)
				{
					var _this:Object=this;
					Alert.show(modify?"修改成功":"保存成功！","系统提示",1,this,
						function():void{
							_this.dispatchEvent(new Event("saveSuccess"));
						});
					return ;
				}
				saveButton.enabled=true;
				Alert.show(f605Response.errorMessage,"系统提示");
			}
			
			
			
			/**
			 *
			 */
			private function F605_13_clickHandler():void
			{
				F605_13.setAreaCode(F605_12.getAreaCode());
			}
			
			private function F605_07_changeHandler(event:TextOperationEvent):void
			{
				if(!F605_06.selectedIndex)
				{
					if((F605_07.text).length < 16)
						return ;
					var f60508:String=CompMethod.getBirthday(StringUtil.trim(F605_07.text));
					F605_08.text=DateField.dateToString(DateField.stringToDate(f60508,'YYYY-MM-DD'),'YYYY-MM-DD');
				}
				
			}
			
			
			/**
			 *
			 */
			private function readCard():void
			{
				try
				{
					var str:String = ExternalInterface.call("parent.readCard");
					if(str != null && str.length != 0){
						var array:Array = str.split(",");
						var sex:String = array[1];//性别
						if(sex=="女"){
							this.F605_05.text = array[0];//姓名
							this.F605_08.text = array[3];//出生日期
							this.F605_07.text = array[5];//身份证号
						}else{
							Alert.show("请读母亲信息！","系统提示");
						}
					}else{
						Alert.show("读卡失败！");
					}
				}catch(error:Error) 
				{
					Alert.show("读卡失败！");
				}
			}
			
			
			private function F605_10_3_changeHandler(event:Event):void
			{
				CompMethod.setRadioButtonSelect(F605_32,'1');
				CompMethod.setRadioButtonSelect(F605_34,'3');
				CompMethod.setRadioButtonSelect(F605_36,'3');
				CompMethod.setRadioButtonSelect(F605_38,'1');
				
			}
			
			private function F605_31_creationCompleteHandler(event:FlexEvent):void
			{
				
				F605_31.selectedIndex=CompMethod.getDropDownListSelectedIndex(F605_31.dataProvider,'41000000000002');
			}
			
		]]>
	</fx:Script>
	
	<s:VGroup paddingBottom="20" paddingLeft="10" paddingRight="10" paddingTop="10">
		
		
		<mx:TabNavigator width="1255" chromeColor="#ffffff" creationPolicy="all">
			<s:NavigatorContent width="100%" label="基本信息" >	
				<s:VGroup gap="0">
					
					<mx:Grid paddingLeft="8" paddingBottom="2" horizontalGap="5">
						<mx:GridRow>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="产妇姓名"/>	
								<s:TextInput id="F605_05" width="150"  />	
								<s:Label text="*" styleName="must"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="证件类型" paddingLeft="15"/>
								<s:DropDownList id="F605_06" width="130" />
								<s:Label text="*" styleName="must"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="证件号码" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:TextInput id="F605_07" width="140" change="F605_07_changeHandler(event)" maxChars="18"/>
								<s:Label text="*" styleName="must"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="出生日期" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<component:CustomRangeDateField  id="F605_08"/>
								<s:Label text="*" styleName="must"/>
								<s:Button id="duka1" width="50" label="读卡"
										  click="readCard()" enabled="false"/>
							</mx:GridItem>
							
							
							<mx:GridItem >
								<s:Label styleName="mySize" text="联系电话" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:TextInput id="F605_09" width="130" restrict="0-9"/>
								<s:Label text="*" styleName="must"/>
							</mx:GridItem>
							
							
						</mx:GridRow>
						<mx:GridRow>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="本次胎数" />
								<mx:VBox>
									<s:HGroup paddingLeft="10" paddingRight="10" verticalAlign="middle" id="F605_17">
										<s:RadioButton styleName="mySize" buttonMode="true" groupName="F605_17" selected="true" label="单胎" value="1" 
													   change="F605_18.text='1'"/>
										<s:RadioButton styleName="mySize"  buttonMode="true" groupName="F605_17" label="双胎"  value="2" 
													   change="F605_18.text='2'"/>
										<s:RadioButton styleName="mySize"  buttonMode="true" groupName="F605_17"  label="多胞胎" value="3" 
													   change="F605_18.text=''"/>
									</s:HGroup>
								</mx:VBox>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="本次胎数" paddingLeft="15"/>
								<s:TextInput id="F605_18" width="130" restrict="0-9" maxChars="1" text="1"/>
							</mx:GridItem>
							
							
							
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="胎        次 " paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:TextInput id="F605_19" width="140" restrict="0-9" maxChars="1"/>
								<s:Label text="*" styleName="must"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="产        次" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:TextInput id="F605_20" width="130" maxChars="1" restrict="0-9"/>
								<s:Label text="*" styleName="must"/>
							</mx:GridItem>
							
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="保健卡号" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:TextInput id="F605_03" width="130" />
							</mx:GridItem>
						</mx:GridRow>
						
						<mx:GridRow>
							
							<mx:GridItem>	
								<s:Label styleName="mySize" text="付费方式"/>
								<s:HGroup id="F605_10"  paddingLeft="10" paddingRight="10">
									<s:RadioButton styleName="mySize"  groupName="F605_10" value="1" buttonMode="true" label="免费" selected="true"
												   change="CompMethod.hasNumEles(zdGrid)" id="F605_10_1"/>
									<s:RadioButton styleName="mySize"  groupName="F605_10" value="2" buttonMode="true" label="自费"
												   change="CompMethod.hasNumEles(zdGrid)" id="F605_10_2"/>
									<s:RadioButton styleName="mySize"  groupName="F605_10" value="3" buttonMode="true" label="报销" id="F605_10_3"
												   change="F605_10_3_changeHandler(event)"/>
								</s:HGroup>
							</mx:GridItem>
							
							<mx:GridItem>	
								<s:Label styleName="mySize" text="孕周算法" paddingLeft="15"/>
								<s:HGroup id="F605_75"  paddingLeft="10" paddingRight="10">
									<s:RadioButton styleName="mySize"  groupName="F605_75" value="1" buttonMode="true" label="末次月经" selected="true" id="F605_75_1"
												   change="CompMethod.hasNumEles([F605_76,F605_77,F605_78,F605_79,F605_80])"/>
									<s:RadioButton styleName="mySize"  groupName="F605_75" value="4" buttonMode="true" label="B超" id="F605_75_4"
												   change="CompMethod.hasNumEles([F605_14,F605_15,F605_16,F605_78,F605_79,F605_80])"/>
									<s:RadioButton styleName="mySize"  groupName="F605_75" value="5" buttonMode="true" label="辅助生殖" id="F605_75_5"
												   change="CompMethod.hasNumEles([F605_14,F605_15,F605_16,F605_76,F605_77]);F605_78_2.selected=true"/>
								</s:HGroup>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="末次月经"  paddingLeft="15" />
							</mx:GridItem>
							
							<mx:GridItem>
								<component:CustomRangeDateField  id="F605_14" enabled="{F605_75_1.selected}" width="140"/>
								
							</mx:GridItem>
							
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="月经周期" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								
								
								
								<s:BorderContainer width="130" height="23"   enabled="{F605_75_1.selected}">
									<s:HGroup verticalAlign="middle" id="F601_20Hgroup">
										<s:TextInput id="F605_15" width="105" borderVisible="false" maxChars="2" textAlign="right"  restrict="0-9"/>
										<s:Label styleName="mySize" paddingRight="0" text="天"/>
									</s:HGroup>
								</s:BorderContainer>
							</mx:GridItem>
							
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="孕        周" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:BorderContainer width="130" height="23"   enabled="{F605_75_1.selected}">
									<s:HGroup verticalAlign="middle" id="F605_16">
										<s:TextInput id="F605_16_1" width="41" borderVisible="false" maxChars="2" textAlign="right"  restrict="0-9"/>
										<s:Label styleName="mySize" paddingRight="0" text="周"/>
										<s:TextInput id="F605_16_2" width="42" borderVisible="false" maxChars="1" textAlign="right"  restrict="0-6"/>
										<s:Label styleName="mySize" paddingRight="0" text="天"/>
									</s:HGroup>
								</s:BorderContainer>
							</mx:GridItem>
							
						</mx:GridRow>
						
						<mx:GridRow>
							
							
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="超声日期"  />
								<component:CustomRangeDateField  id="F605_76"  enabled="{F605_75_4.selected}" width="150" />
							</mx:GridItem>
							
							
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="超声孕周" paddingLeft="15"/>
								<s:BorderContainer width="130" height="23" enabled="{F605_75_4.selected}">
									<s:HGroup verticalAlign="middle" id="F605_77">
										<s:TextInput id="F605_77_1" width="41" borderVisible="false" maxChars="2" textAlign="right"  restrict="0-9"/>
										<s:Label styleName="mySize" paddingRight="0" text="周"/>
										<s:TextInput id="F605_77_2" width="42" borderVisible="false" maxChars="1" textAlign="right"  restrict="0-6"/>
										<s:Label styleName="mySize" paddingRight="0" text="天"/>
									</s:HGroup>
								</s:BorderContainer>
							</mx:GridItem>
							
							<mx:GridItem>	
								<s:Label styleName="mySize" text="IVF" paddingLeft="15"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:HGroup id="F605_78"  paddingLeft="10" paddingRight="10" gap="30" enabled="{F605_75_5.selected}">
									<s:RadioButton styleName="mySize"  groupName="F605_78" value="2" buttonMode="true" label="否" id="F605_78_2"/>
									<s:RadioButton styleName="mySize"  groupName="F605_78" value="1" buttonMode="true" label="是"/>
								</s:HGroup>
							</mx:GridItem>
							
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="取卵日期"  paddingLeft="15"/>
							</mx:GridItem>
							
							
							<mx:GridItem>
								<component:CustomRangeDateField  id="F605_79" enabled="{F605_75_5.selected}"/>
							</mx:GridItem>
							
							<mx:GridItem>
								<s:Label styleName="mySize" text="植入日期"  paddingLeft="15" />
							</mx:GridItem>
							
							
							<mx:GridItem>
								<component:CustomRangeDateField  id="F605_80" enabled="{F605_75_5.selected}"/>
							</mx:GridItem>
							
						</mx:GridRow>
						<mx:GridRow>
							<mx:GridItem>
								<s:Label styleName="mySize" text="产诊机构"/>
								<component:institutionCodeComboBox id="F605_31" width="150" hasDefaultItem="false"
																   includeData="{F605_31.defaultCode+',41000000000002,41000000000003,41000000000005'}" 
																   includeParent="{F605_31.defaultCode}"	   
																   creationComplete="F605_31_creationCompleteHandler(event)"/>
								
							</mx:GridItem>
						</mx:GridRow>
					</mx:Grid>
					<mx:Grid  paddingLeft="8" paddingBottom="10" horizontalGap="5">
						<mx:GridRow>
							
							<mx:GridItem colSpan="5" id="F605_11_1">
								<s:Label styleName="mySize" text="免费类型"/>
								<s:CheckBox buttonMode="true" automationName="1" label="≥35周岁（未进行免费唐筛）" 
											id="F605_11_01"
											change="checkbox1_changeHandler(event)"/>
								<s:CheckBox buttonMode="true" automationName="2" label="血清学筛查高风险"/>
								<s:CheckBox buttonMode="true" automationName="3" label="曾孕育21-三体/18-三体/13-三体等非整倍体胎儿的孕妇"/>
								<s:CheckBox buttonMode="true" automationName="4" label="夫妇一方为染色体携带者（平衡异位/罗氏异位/倒位）"/>
								
							</mx:GridItem>
							
							
						</mx:GridRow>
						<mx:GridRow>
							
							<mx:GridItem colSpan="5" id="F605_11_2">
								<s:Label styleName="mySize" text="免费类型" />
								<s:CheckBox buttonMode="true" automationName="5" label="孕妇为杜氏肌营养不良/血友病A /血友病B基因携带者"/>
								
								<s:CheckBox buttonMode="true" automationName="6" label="夫妇均为脊髓性肌萎缩症/苯丙酮尿症/甲基丙二酸血症基因携带者"/>
								
							</mx:GridItem>
							
							
						</mx:GridRow>
						
						<mx:GridRow>
							<mx:GridItem colSpan="5">
								<s:Label styleName="mySize" width="57" text="现住址"/>
								<component:AreaComboBoxVillageAuto id="F605_12" width="938" buttonMode="true" table="D201_MS"
																   areaCode="{this.parentApplication.systemUser.areaCode}"
																   creationComplete="if(modify)AreaComboBox_creationCompleteHandler(F605_12,vf605.f60512)"/>
								<s:Label text="*" styleName="must"/>
							</mx:GridItem>
						</mx:GridRow>	
						
						<mx:GridRow>
							<mx:GridItem colSpan="5">
								<s:Label styleName="mySize" width="57" text="户口地址"/>
								<component:AreaComboBoxVillageAuto id="F605_13" width="938" buttonMode="true" table="D201_MS"
																   areaCode="{this.parentApplication.systemUser.areaCode}"
																   creationComplete="if(modify)AreaComboBox_creationCompleteHandler(F605_13,vf605.f60513)"/>
								<s:Label text="*" styleName="must"/>
								<s:Button label="同现住址" click="F605_13_clickHandler()" buttonMode="true"/>
							</mx:GridItem>
						</mx:GridRow>
					</mx:Grid>
				</s:VGroup>
			</s:NavigatorContent>
		</mx:TabNavigator>
		
		
		
		<mx:TabNavigator width="1255" chromeColor="#ffffff" creationPolicy="all">
			<s:NavigatorContent width="100%" label="既往史" >	
				<mx:Grid paddingLeft="8" paddingBottom="10">
					<mx:GridRow>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="不良孕产史"/>	
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup width="90" gap="25" id="F605_21">
								<s:RadioButton styleName="mySize"  groupName="F605_21" buttonMode="true" value="2" label="否" selected="true"
											   change="F605_22.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_21" buttonMode="true" value="1" label="是" id="F605_21_1"/>
							</s:HGroup>  
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="不良孕产史说明" paddingLeft="15"/>
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:TextInput width="256" id="F605_22" enabled="{F605_21_1.selected}"/>
							
							
						</mx:GridItem>
						
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="孕期不良接触史" paddingLeft="15"/>	
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup width="90" gap="25" id="F605_23">
								<s:RadioButton styleName="mySize"  groupName="F605_23" buttonMode="true" value="2" label="否" selected="true"
											   change="F605_24.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_23" buttonMode="true" value="1" label="是" id="F605_23_1"/>
							</s:HGroup>  
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="孕期不良接触史说明" paddingLeft="15"/>
							
						</mx:GridItem>
						
						<mx:GridItem >
							<s:TextInput width="270" id="F605_24" enabled="{F605_23_1.selected}"/>
							
						</mx:GridItem>
						
					</mx:GridRow>
					
					<mx:GridRow>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="孕期服药史"/>	
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup width="90" gap="25" id="F605_25">
								<s:RadioButton styleName="mySize"  groupName="F605_25" buttonMode="true" value="2" label="否" selected="true"
											   change="F605_26.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_25" buttonMode="true" value="1" label="是" id="F605_25_1"/>
								
							</s:HGroup>  
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="孕期服药史说明" paddingLeft="15"/>
							
						</mx:GridItem>
						
						<mx:GridItem >
							<s:TextInput width="256" id="F605_26" enabled="{F605_25_1.selected}"/>
						</mx:GridItem>
						
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="家族遗传病史"  paddingLeft="15"/>
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup width="90" gap="25" id="F605_28">
								<s:RadioButton styleName="mySize"  groupName="F605_28" buttonMode="true" value="2" label="否" selected="true"
											   change="F605_29.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_28" buttonMode="true" value="1" label="是" id="F605_28_1"/>
							</s:HGroup>  
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="家族遗传病史说明" paddingLeft="15"/>
							
						</mx:GridItem>
						
						<mx:GridItem >
							<s:TextInput width="270" id="F605_29" enabled="{F605_28_1.selected}"/>
							
						</mx:GridItem>
						
					</mx:GridRow>
					
					<mx:GridRow>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="父母是否近亲结婚"/>	
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup width="90" gap="25" id="F605_27">
								<s:RadioButton styleName="mySize"  groupName="F605_27" buttonMode="true" value="2" label="否" selected="true"/>
								<s:RadioButton styleName="mySize"  groupName="F605_27" buttonMode="true" value="1" label="是"/>
							</s:HGroup>  
							
						</mx:GridItem>
						
					</mx:GridRow>
					
				</mx:Grid>
			</s:NavigatorContent>
		</mx:TabNavigator>
		
		
		
		
		
		
		<mx:TabNavigator width="1255" chromeColor="#ffffff" creationPolicy="all">
			<s:NavigatorContent width="100%" label="诊断信息(报销需登记)" enabled="{F605_10_3.selected}">	
				<mx:Grid paddingLeft="8" paddingBottom="10" id="zdGrid">
					
					<mx:GridRow>
						<mx:GridItem >
							<s:Label styleName="mySize" text="产诊日期"/>
						</mx:GridItem>
						
						<mx:GridItem>
							<component:CustomRangeDateField  id="F605_30"/>
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="样本来源"  paddingLeft="15"/>	
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup gap="5" id="F605_32">
								<s:RadioButton styleName="mySize"  groupName="F605_32" buttonMode="true" value="1" label="羊水" />
								<s:RadioButton styleName="mySize"  groupName="F605_32" buttonMode="true" value="2" label="绒毛"/>
								<s:RadioButton styleName="mySize"  groupName="F605_32" buttonMode="true" value="3" label="脐带血"/>
							</s:HGroup>  
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="采集日期"  paddingLeft="15"/>	
							<component:CustomRangeDateField  id="F605_33"/>
							<s:BorderContainer width="107" height="23">
								<s:HGroup verticalAlign="middle">
									<s:TextInput id="F605_33H" width="30" borderVisible="false" textAlign="right" maxChars="2" restrict="0-9"/>
									<s:Label text="时"/>
									<s:TextInput id="F605_33M" width="30" borderVisible="false" textAlign="right"  maxChars="2" restrict="0-9"/>
									<s:Label text="分"/>
								</s:HGroup>
							</s:BorderContainer>
						</mx:GridItem>
						
						
						
					</mx:GridRow>
					
					<mx:GridRow>
						
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="染色体核型分析"/>	
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup width="109" gap="5" id="F605_34">
								<s:RadioButton styleName="mySize"  groupName="F605_34" buttonMode="true" value="3" label="正常" 
											   change="F605_35.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_34" buttonMode="true" value="2" label="异常" id="F605_34_2"/>
							</s:HGroup>  
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="异常说明" paddingLeft="15" />
						</mx:GridItem>
						
						<mx:GridItem colSpan="3">
							<s:TextInput width="100%" id="F605_35" enabled="{F605_34_2.selected}"/>
						</mx:GridItem>
						
						
						
					</mx:GridRow>
					
					
					<mx:GridRow>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="单基因遗传病检测"/>	
						</mx:GridItem>
						
						<mx:GridItem>
							
							<s:HGroup  gap="5" id="F605_36">
								<s:RadioButton styleName="mySize"  groupName="F605_36" buttonMode="true" value="3" label="正常" 
											   change="F605_37.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_36" buttonMode="true" value="2" label="异常" id="F605_36_2"/>
							</s:HGroup>  
							
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="异常说明" paddingLeft="15"/>
						</mx:GridItem>
						<mx:GridItem colSpan="3">
							<s:TextInput width="100%" id="F605_37" enabled="{F605_36_2.selected}"/>
							
						</mx:GridItem>
						
					</mx:GridRow>
					
					<mx:GridRow>
						
						<mx:GridItem >
							<s:Label styleName="mySize" text="检测方法" />
						</mx:GridItem>
						<mx:GridItem>
							<s:HGroup gap="5" verticalAlign="baseline" id="F605_38">
								<s:RadioButton styleName="mySize"  groupName="F605_38" buttonMode="true" value="1" label="PCR-Sanger测序"
											   change="F605_39.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_38" buttonMode="true" value="2" label="MLPA"
											   change="F605_39.text=''"/>
								<s:RadioButton styleName="mySize"  groupName="F605_38" buttonMode="true" value="9" label="其他" id="F605_38_9"/>
							</s:HGroup>
							
						</mx:GridItem>
						<mx:GridItem>
							<s:Label styleName="mySize" text="其他方法"  paddingLeft="15"/>	
						</mx:GridItem>
						<mx:GridItem colSpan="3">
							<s:TextInput width="100%" id="F605_39" enabled="{F605_38_9.selected}"/>
						</mx:GridItem>
					</mx:GridRow>
				</mx:Grid>
			</s:NavigatorContent>
		</mx:TabNavigator>
		
		
		
		<mx:TabNavigator width="1255" chromeColor="#ffffff" creationPolicy="all">
			<s:NavigatorContent width="100%" label="送检信息">	
				<mx:Grid paddingLeft="8" paddingBottom="10">
					<mx:GridRow>
						
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="申请单位"/>
							<component:institutionCodeComboBox id="F605_41"  enabled="false" isSelectUserCode="true"/>
							<s:Label text="*" styleName="must"/>
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="申请医师" paddingLeft="15"/>
							<component:FindSelectedItemComboBox editable="true" id="F605_43" width="140" height="22"/>
							<s:Label text="*" styleName="must"/>
						</mx:GridItem>
						
						<mx:GridItem>
							<s:Label styleName="mySize" text="申请日期" paddingLeft="15"/>
							<component:CustomRangeDateField  id="F605_42"  isSelectNow="{!modify}" enabled="false"/>
							<s:Label text="*" styleName="must"/>
						</mx:GridItem>
					</mx:GridRow>
				</mx:Grid>
			</s:NavigatorContent>
		</mx:TabNavigator>
		
		<s:HGroup paddingBottom="10" verticalAlign="middle" width="1255" horizontalAlign="center">
			<s:Button label="保存" id="saveButton" click="validate()"/>
		</s:HGroup>
	</s:VGroup>
</s:VGroup>
