<?xml version="1.0" encoding="utf-8"?>
<mx:TabNavigator xmlns:fx="http://ns.adobe.com/mxml/2009"
				 xmlns:s="library://ns.adobe.com/flex/spark"
				 xmlns:mx="library://ns.adobe.com/flex/mx"
				 width="348" chromeColor="#ffffff" creationPolicy="all">
	<fx:Declarations>
		<s:RemoteObject id="systemService" destination="systemService"
						endpoint="{this.parentApplication.contextRoot}/messagebroker/amf"
						showBusyCursor="true">
			<s:method name="getComboBoxData" result="getComboBoxDataHandler(event)"/>
		</s:RemoteObject>
		
		
		<s:RemoteObject id="l302Service" destination="l302Service"
						endpoint="{this.parentApplication.contextRoot}/messagebroker/amf"
						showBusyCursor="true">
			<s:method name="queryL302" result="queryL302Handler(event)"/>
		</s:RemoteObject>
	</fx:Declarations>
	<fx:Metadata>
		[Event(name="loadSuccess", type="flash.events.Event")]
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import com.xyw.module.msss.la.model.L302;
			import com.xyw.module.msss.la.model.L302Request;
			import com.xyw.sys.custom.component.CompMethod;
			import com.xyw.sys.model.ComboBoxDataRequest;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.rpc.events.ResultEvent;
			public var vl302:Object;
			
			
			/******************下拉框填充数据******************/
			private function initializeComboBox():void
			{
				var comboBoxDataRequest:ComboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.showPrompt = true;
				comboBoxDataRequest.sql = "select * from   LA302_21 t";
				comboBoxDataRequest.flag = "LA302_21";
				this.systemService.getComboBoxData(comboBoxDataRequest);
			}
			/******************得到数据******************/
			private function getComboBoxDataHandler(event:ResultEvent):void
			{
				var comboBoxDataResponse:Object =  event.result;
				var flag:String = comboBoxDataResponse.flag;
				var comboBoxDataList:ArrayCollection = comboBoxDataResponse.comboBoxDataList;
				if(flag == "LA302_21")
				{
					L302_90.dataProvider=comboBoxDataList;
					L302_90.selectedIndex=0;
				}
			}
			/**
			 *
			 */
			public function queryObject(itemArr:Array):void
			{
				initializeComboBox();
				var l302:L302=new L302();
				l302.l30203=itemArr[0].l30102;
				l302.l30204=itemArr[0].l30104;
				var l302Request:L302Request = new L302Request();
				l302Request.l302=l302;
				l302Request.parameterPageindex=1;
				l302Request.parameterPagesize=1;
				this.l302Service.queryL302(l302Request);
			}
			
			
			
			private function queryL302Handler(event:ResultEvent):void
			{
				var l302Response:Object = event.result;
				var vl302s:ArrayCollection = l302Response.vl302s;
				var rowCount:Number = l302Response.rowCount;
				if(rowCount)
					updateydj(vl302s);
				else if(!l302Response.state)
				{
					Alert.show(l302Response.errorMessage,"系统提示");
					return;
				}
			}
			
			
			private function updateydj(vl302s:ArrayCollection):void
			{
				this.vl302=vl302s.getItemAt(0);
				L302_85_02_clickHandler(null);
				if("1"==vl302.l30285)
				{
					L302_85_01.selected=true;
					("1"==vl302.l30288)==true?(L302_88_01.selected=true):(L302_88_02.selected=true)
					if("1"==vl302.l30289)L302_89_01.selected=true;
					else if("2"==vl302.l30289)
					{
						L302_89_02.selected=true;
						L302_90.selectedIndex=CompMethod.getDropDownListSelectedIndex(ArrayCollection(L302_90.dataProvider),vl302.l30290);
						(L302_90.selectedIndex==4)==true?(L302_115.text=vl302.l302115):"";
					}
				}else if("2"==vl302.l30285)
				{
					L302_85_02.selected=true;
					if("1"==vl302.l30286)L302_86_01.selected=true;
					else if("2"==vl302.l30286)L302_86_02.selected=true;
					else if("9"==vl302.l30286)
					{
						L302_86_03.selected=true;
						L302_87.text=vl302.l30287;
					}
				}
				("1"==vl302.l30291)==true?(L302_91_01.selected=true):(L302_91_02.selected=true);
				this.dispatchEvent(new Event("loadSuccess"));
			}
			
			private function L302_85_02_clickHandler(event:MouseEvent):void
			{
				L302_86_01.selected=true;
				CompMethod._walk(L30288HGroup);	
				CompMethod._walk(L30289HGroup);	
				
			}
		]]>
	</fx:Script>
		<s:NavigatorContent width="100%" label="阴道镜检查">
			<mx:Grid horizontalGap="1">	
				<mx:GridRow paddingLeft="5">
					<mx:GridItem styleName="myGrid">
						<s:Label text="接受阴道镜检查"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_85_01" label="1.是" buttonMode="true"
									   groupName="yvaginoscopy" selected="true"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_85_02" label="2.否" buttonMode="true"
									   groupName="yvaginoscopy"/>
						
					</mx:GridItem>
				</mx:GridRow>
				<mx:GridRow id="L30286HGroup" width="100%" height="100%" paddingBottom="5"
							paddingLeft="5" verticalAlign="middle">
					<mx:GridItem styleName="myGrid">
						<s:Label text="未接受检查的原因"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_86_01" label="1.拒绝检查" buttonMode="true"
									   groupName="yvaginoscopy2"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_86_02" label="2.失访" buttonMode="true"
									   groupName="yvaginoscopy2"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_86_03" label="3.其他原因" buttonMode="true"
									   groupName="yvaginoscopy2"/>
					</mx:GridItem>
				</mx:GridRow>
				<mx:GridRow paddingLeft="5">
					<mx:GridItem/>
					<mx:GridItem colSpan="3" styleName="myGrid">
						<s:Label text="其他原因"/>
						<s:TextInput id="L302_87" width="166" enabled="{L302_86_03.selected}"/>
					</mx:GridItem>
				</mx:GridRow>
				<mx:GridRow id="L30288HGroup" width="100%" height="100%" paddingBottom="5"
							paddingLeft="5" verticalAlign="middle">
					
					<mx:GridItem styleName="myGrid">
						<s:Label text="阴道镜检查评价"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_88_01" label="1.满意" buttonMode="true"
									   groupName="yvaginoscopy3" selected="true"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_88_02" label="2.不满意" buttonMode="true"
									   groupName="yvaginoscopy3"/>
					</mx:GridItem>
					
				</mx:GridRow>
				<mx:GridRow id="L30289HGroup" width="100%" height="100%" paddingBottom="5"
							paddingLeft="5" verticalAlign="middle">
					
					<mx:GridItem styleName="myGrid">
						<s:Label text="初步诊断"/>
					</mx:GridItem>
					<mx:GridItem>
						
						<s:RadioButton id="L302_89_01" label="1.未见异常" buttonMode="true"
									   groupName="yvaginoscopy4" selected="true"/>
					</mx:GridItem>
					<mx:GridItem colSpan="2">
						<s:RadioButton id="L302_89_02" label="2.异常" buttonMode="true"
									   groupName="yvaginoscopy4"/>
					</mx:GridItem>																
				</mx:GridRow>
				
				<mx:GridRow width="100%" height="100%" paddingBottom="5" paddingLeft="5"
							verticalAlign="middle">
					<mx:GridItem/>
					<mx:GridItem colSpan="3" styleName="myGrid">
						<s:Label text="异常原因"/>
						<s:DropDownList id="L302_90" width="167"/>
					</mx:GridItem>																	
				</mx:GridRow>
				<mx:GridRow width="100%" height="100%" paddingBottom="5" paddingLeft="5"
							verticalAlign="middle">
					<mx:GridItem/>
					<mx:GridItem colSpan="3" styleName="myGrid">
						<s:Label text="其他原因"/>
						<s:TextInput id="L302_115" width="165"/>
					</mx:GridItem>		
				</mx:GridRow>
				<mx:GridRow width="100%" height="100%" paddingBottom="5" paddingLeft="5"
							verticalAlign="middle">
					<mx:GridItem>
						<s:Label text="需组织病理检查"/>	
					</mx:GridItem>
					<mx:GridItem>
						
						<s:RadioButton id="L302_91_01" label="1.是" buttonMode="true"
									   groupName="yvaginoscopy5"/>
					</mx:GridItem>
					<mx:GridItem>
						<s:RadioButton id="L302_91_02" label="2.否" buttonMode="true"
									   groupName="yvaginoscopy5" selected="true"/>
					</mx:GridItem>
				</mx:GridRow>
			</mx:Grid>
		</s:NavigatorContent>
		
	</mx:TabNavigator>
