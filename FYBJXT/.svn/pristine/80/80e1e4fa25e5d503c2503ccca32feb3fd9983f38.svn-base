<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:context="http://www.springframework.org/schema/context"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/tx 
     http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd
     http://www.springframework.org/schema/aop
     http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">
   
   <context:annotation-config/><!--声明可以通过注解的方式，实现bean的初始化。-->
   <context:component-scan base-package="com.xyw.*"/><!-- 配置容器资源扫描的包 -->
   <tx:annotation-driven transaction-manager="transactionManager"/>

   <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
   	 <property name="jndiName" value="ny_csyxzm"/> 
   	 <property name="resourceRef" value="true"/>
   	 <property name="jndiEnvironment">
   	 	<props>
   	 		<prop key="java.naming.provider.url">t3://127.0.0.1:7002</prop>
   	 		<prop key="java.naming.factory.initial">weblogic.jndi.WLInitialContextFactory</prop>
   	 	</props>
   	 </property>
   </bean>
   
   <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
     <property name="dataSource" ref="dataSource"/>
   </bean>
   
   <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
   	 <property name="dataSource" ref="dataSource"/> 	  
   	 <property name="configLocations">
   	 	<list>
   	 	  <value>classpath:hibernate.cfg.xml</value>
   	 	</list>
   	 </property>
   </bean>
   <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
   	  <property name="sessionFactory" ref="sessionFactory"/>
   </bean>
   <bean id="sessionAdvice" class="com.xyw.sys.flex.session.interceptor.FlexSessionInterceptor"/>
   <bean id="beanNameAutoProxyCreator" class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
   	 <property name="beanNames">
   	 	<list>
   	 		<value>ruralFamilyFileService</value>
   	 	</list>
   	 </property>
   	 <property name="interceptorNames">
   	 	<value>sessionAdvice</value>
   	 </property>
   </bean>
   
   <import resource="applicationContext-dao.xml"/>
   <import resource="applicationContext-service.xml"/>
   
</beans>