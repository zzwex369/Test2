<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009"
			   xmlns:s="library://ns.adobe.com/flex/spark"
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   xmlns:component="com.xyw.sys.custom.component.*"
			   width="1024" height="246" backgroundColor="#FFFFFF" chromeColor="#5CACEE"
			   close="CompMethod.closeWindow(this)" cornerRadius="5" creationComplete="init()"
			   skinClass="com.xyw.sys.custom.skin.CustomTitleWindow" title="宫颈癌档案信息">
	<fx:Declarations>
		<s:RemoteObject id="l301Service" destination="l301Service"
						endpoint="{this.parentApplication.contextRoot}/messagebroker/amf"
						showBusyCursor="true">
			<s:method name="queryL301" result="queryL301Handler(event)"/>
		</s:RemoteObject>
	</fx:Declarations>
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		
		
		s|DropDownList
		{
			skinClass:ClassReference("com.xyw.sys.custom.skin.CustomDropDownListSkin");
			selectionColor:#DDDDDD;
			rollOverColor:#EEEEEE;	
		}
		s|Button
		{
			skinClass:ClassReference("com.xyw.sys.custom.skin.CustomButtonSkin");
		}
		s|Label
		{
			fontSize:13;
		}
		s|DataGrid
		{
			borderAlpha:"0.3";
			skinClass:ClassReference("com.xyw.sys.custom.skin.CustomDataGridSkin");
			alternatingRowColors:"[#FFFFFF,#EEEEEE]";
		}
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import com.xyw.module.msss.la.model.L301;
			import com.xyw.module.msss.la.model.L301Request;
			import com.xyw.module.msss.la.model.VL301;
			import com.xyw.sys.custom.component.CompMethod;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.managers.PopUpManager;
			import mx.rpc.events.ResultEvent;
			
			import spark.events.GridSelectionEvent;
			public var l30102:String=null;
			public var l30104:String=null;
			public var systemUserInstitutionCode:String=null;
			public function init():void {
				try{ 
					this.isPopUp=false;
					if(l30102!=null&&l30104!=null)
					{
						var l301:L301=new L301();
						var l301Request:L301Request=new L301Request();
						l301.l30102=l30102;
						l301.l30104=l30104;
						l301.l30117 = systemUserInstitutionCode.substring(0,4);
						l301Request.l301=l301;
						l301Request.flag="true";
						l301Request.parameterPageindex=1;
						l301Request.parameterPagesize=20;
						l301Service.queryL301(l301Request);
					}
				}catch(error:Error){
					CompMethod.closeWindow(this);
					Alert.show("网络繁忙，请重试!","系统提示");
				} 
			}
			
			public function queryL301Handler(event:ResultEvent):void {
				var l301Response:Object = event.result;
				if(l301Response.state){
					var vl301s:ArrayCollection =l301Response.vl301s;
					this.certificateDataGrid.dataProvider=vl301s;
				}else{
					Alert.show(l301Response.errorMessage,"系统提示");
				}
			}
			
			private function onSelected(event:GridSelectionEvent):void{
				CompMethod.closeWindow(this);
				var vl301Obj:Object= DataGrid(event.target).selectedItem;
				if(vl301Obj!=null){
					var gjajc:Object=this.owner;
					gjajc.getVl301(vl301Obj);
				}else{
					Alert.show("请选择要加载的数据！","系统提示");
					vl301Obj = null;
				}
			}
		]]>
	</fx:Script>
	<s:VGroup width="100%" horizontalAlign="center" verticalAlign="middle">
		<s:HGroup paddingBottom="5" paddingLeft="15" paddingTop="10"  paddingRight="5" width="100%" height="100%" chromeColor="#F6F8FA" contentBackgroundColor="#FFFFFF">
			<s:DataGrid id="certificateDataGrid" width="980" height="150" alternatingRowColors="[#FFFFFF,#EEEEEE]" editable="true" rowHeight="23" selectionChange="onSelected(event)">
				<s:columns>     
					<s:ArrayList>
						<s:GridColumn visible="false" dataField="l30101" headerText="主键"/>
						<s:GridColumn width="40" editable="false" headerText="序号" itemRenderer="com.xyw.sys.custom.itemrenderer.CustomGridColumnItemRenderer"/>
						<s:GridColumn width="200" dataField="l30116" headerText="档案编号"/>
						<s:GridColumn width="100" dataField="l30102" headerText="姓名"/>
						<s:GridColumn width="140" dataField="l30104" headerText="证件号码"/>
						<s:GridColumn width="117" dataField="l30110" headerText="联系电话"/>
						<s:GridColumn width="125" dataField="l30105str" headerText="出生日期"/>
						<s:GridColumn width="200" dataField="l30117zh" headerText="录入单位"/>
						<s:GridColumn width="100" dataField="l30118" headerText="录入人员"/>
						<s:GridColumn  dataField="l30119str" headerText="录入时间"/>
					</s:ArrayList>
				</s:columns>
			</s:DataGrid> 	
		</s:HGroup>
		
		<s:HGroup contentBackgroundColor="#FF0000" verticalAlign="middle" horizontalAlign="right" paddingBottom="20" paddingTop="10" paddingLeft="10" paddingRight="20" width="100%" height="30">
			<s:Button label="关闭" click="CompMethod.closeWindow(this)"/>
		</s:HGroup>
	</s:VGroup>
	
</s:TitleWindow>