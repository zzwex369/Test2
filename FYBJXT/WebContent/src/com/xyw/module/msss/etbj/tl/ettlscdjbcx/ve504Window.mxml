<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			    backgroundColor="white" cornerRadius="5"
			   chromeColor="#5CACEE" close="close()"
			   xmlns:mx="library://ns.adobe.com/flex/mx" width="1220" height="650" title="儿童听力登记表修改" 
			   xmlns:component="com.xyw.sys.custom.component.*" creationComplete="init()">
	<fx:Declarations>
		<s:RemoteObject id="e504Service" destination="e504Service"
						endpoint="{this.parentApplication.contextRoot}/messagebroker/amf"
						showBusyCursor="true">
			<s:method name="renewE504" result="renewE504Handler(event)"/>
		</s:RemoteObject>
		<s:RemoteObject id="systemService" destination="systemService"
						endpoint="{this.parentApplication.contextRoot}/messagebroker/amf"
						showBusyCursor="true">
			<s:method name="getComboBoxData" result="getComboBoxDataHandler(event)"/>
		</s:RemoteObject>
	</fx:Declarations>
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		
		
		.myLabel {
			fontSize:12px;
			paddingTop:4px;
		}
		.myGrid {
			verticalAlign:middle;
		}
		.myTextInput
		{
			fontFamily:微软雅黑;
		}
		.must {
			color:red;
			fontSize:20px;
			fontWeight:bold;
			paddingTop:5px;
		}
		.errorTip
		{
			font-size: 15;
			border-color: red;/* //控制背景色 */
			color: #fff;
			font-weight: bold;
			paddingBottom:1; 
			cornerRadius:5;
		}
		
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import com.xyw.module.msss.etbj.model.E504;
			import com.xyw.module.msss.etbj.model.VE504;
			import com.xyw.sys.custom.component.CompMethod;
			import com.xyw.sys.model.ComboBoxDataRequest;
			import com.xyw.sys.model.SystemUser;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.controls.DateField;
			import mx.events.CloseEvent;
			import mx.managers.PopUpManager;
			import mx.rpc.events.ResultEvent;
			import mx.utils.StringUtil;
			private var e504:E504 = new E504();
			private var comboBoxDataList:ArrayCollection;
			private var  systemUser:SystemUser=null;
			public var ve504:Object;
			private var num:int =6;
			private var comboBoxDataRequest:ComboBoxDataRequest;
			private function init():void{
				systemUser=this.parentApplication.systemUser;
				var date:Date=new Date();
				this.E504_59.selectedDate = date;
				initializeComboBox();
				
			}
			private function initializeComboBox():void{
				comboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.showPrompt = true;
				comboBoxDataRequest.sql = "select t.d101_01, t.d101_02 from D101 t where t.D101_01 = " + this.systemUser.institutionCode + " or t.D101_11 = " + this.systemUser.institutionCode;
				comboBoxDataRequest.flag = "D101";
				this.systemService.getComboBoxData(this.comboBoxDataRequest);
				
				//户籍类型
				comboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.showPrompt = true;
				comboBoxDataRequest.sql = "select * from Z501_08 t"
				comboBoxDataRequest.flag = "Z501_08";
				this.systemService.getComboBoxData(this.comboBoxDataRequest);
				
				//性别
				comboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.showPrompt = true;
				comboBoxDataRequest.sql = "select * from S301_01 t"
				comboBoxDataRequest.flag = "S301_01";
				this.systemService.getComboBoxData(this.comboBoxDataRequest);
				
				//分娩方式
				comboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.showPrompt = true;
				comboBoxDataRequest.sql = "select * from S601_08 t"
				comboBoxDataRequest.flag = "S601_08";
				this.systemService.getComboBoxData(this.comboBoxDataRequest);
				
				
				
				//胎数
				comboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.showPrompt = true;
				comboBoxDataRequest.sql = "select * from Z501_01 t"
				comboBoxDataRequest.flag = "Z501_01";
				this.systemService.getComboBoxData(this.comboBoxDataRequest);
				
				
				//与新生儿关系
				comboBoxDataRequest = new ComboBoxDataRequest();
				comboBoxDataRequest.showPrompt = true;
				comboBoxDataRequest.sql = "select * from S301_07 t"
				comboBoxDataRequest.flag = "S301_07";
				this.systemService.getComboBoxData(this.comboBoxDataRequest);
			}
			
			
			private function getComboBoxDataHandler(event:ResultEvent):void{
				--num;
				var comboBoxDataResponse:Object =  event.result;
				var flag:String = comboBoxDataResponse.flag;
				comboBoxDataList= comboBoxDataResponse.comboBoxDataList;
				if(flag=="D101"){
					var index:int=this.getDropDownListSelectedIndex(comboBoxDataList,this.systemUser.institutionCode);
					this.E504_57.dataProvider = comboBoxDataList;
					//this.E504_12.dataProvider = comboBoxDataList;
					this.E504_57.selectedIndex = index;
					//this.E504_12.selectedIndex = index;
				}else if(flag=="Z501_08"){
					this.E504_13.dataProvider = comboBoxDataList;
					this.E504_13.selectedIndex = 1;
				}else if(flag=="S301_01"){
					this.E504_15.dataProvider = comboBoxDataList;
					this.E504_15.selectedIndex = 1;
				}else if(flag=="S601_08"){
					this.E504_18.dataProvider = comboBoxDataList;
					this.E504_18.selectedIndex = 1;
				}else if(flag=="Z501_01"){
					this.E504_23.dataProvider = comboBoxDataList;
					this.E504_23.selectedIndex = 1;
				}else if(flag=="S301_07"){
					this.E504_53.dataProvider = comboBoxDataList;
					this.E504_53.selectedIndex = 1;
					this.E504_55.dataProvider = comboBoxDataList;
					this.E504_55.selectedIndex = 1;
				}/* else if(flag=="S301_10_01"){
					this.E504_56.dataProvider = comboBoxDataList;
					this.E504_56.selectedIndex = 0;
				}else if(flag=="S301_10_02"){
					this.E504_58.dataProvider = comboBoxDataList;
					this.E504_58.selectedIndex = 0;
				} */
				if(!num)
					loadE504();
			}
			private function loadE504():void{
				this.E504_05.text = ve504.e50405;
				this.E504_06.text = ve504.e50406;
				this.E504_07.text = ve504.e50407;
				this.E504_08.text = ve504.e50408;
				this.E504_10.text = ve504.e50410;
				this.E504_11.text = ve504.e50411;
				this.E504_12.text = ve504.e50412;
				this.E504_13.selectedIndex = Number(ve504.e50413);
				this.E504_14.text = DateField.dateToString(ve504.e50414,'YYYY-MM-DD');
				this.E504_15.selectedIndex = Number(ve504.e50415);
				this.E504_16.text = ve504.e50416.toString();
				this.E504_17.text = ve504.e50417.toString();
				this.E504_18.selectedIndex = Number(ve504.e50418);
				loadE504_19(ve504.e50419);
				this.E504_20.text = String(ve504.e50420);
				this.E504_21.text = String(ve504.e50421);
				this.E504_22.text = String(ve504.e50422);
				this.E504_23.selectedIndex = Number(ve504.e50423);
				loadywAll(ve504.e50424,ve504.e50425,E504_24,E504_25,'缺陷描述：');
				loadywAll(ve504.e50429,ve504.e50430,E504_29,E504_30,'分娩描述：');
				loadywAll(ve504.e50431,ve504.e50432,E504_31,E504_32,'畸形描述：');
				loadywAll(ve504.e50433,ve504.e50434,E504_33,E504_34,'患病描述：');
				loadywAll(ve504.e50435,ve504.e50436,E504_35,E504_36,'感染描述：');
				loadywAll(ve504.e50437,ve504.e50438,E504_37,E504_38,'外伤描述：');
				loadywAll(ve504.e50443,ve504.e50444,E504_43,E504_44,'中耳炎描述：');
				CompMethod.setRadioButtonSelect([E504_48],ve504.e50448);
				setSplitVal([E504_49_1,E504_49_2],ve504.e50449);
				loadyw(ve504.e50426,E504_26);
				loadyw(ve504.e50427,E504_27);
				loadyw(ve504.e50428,E504_28);
				loadE504_39();
				loadE504_45();
				loadyw(ve504.e50450,E504_50);
				if(ve504.e50451==null){
					ve504.e50451="0,0,0,0,";
				}
				loadE504_51(ve504.e50451);
				loadyw(ve504.e50452,E504_52);
				this.E504_53.selectedIndex = Number(ve504.e50453);
				loadyw(ve504.e50454,E504_54);
				this.E504_55.selectedIndex = Number(ve504.e50455);
				this.E504_56.text = ve504.e50456;
				this.E504_58.text = ve504.e50458;
				this.E504_59.text = DateField.dateToString(ve504.e50459,'YYYY-MM-DD');
			}
			
			private function loadE504_39():void{
			 if(ve504.e50439=="0"){
				 this.E504_39_1.selected = false;
				 this.E504_40.text = "药名：";
				 this.E504_41.text = "剂量：";
				 this.E504_42.text = "疗程：";
			 }else if(ve504.e50439=="1"){
				 this.E504_39_1.selected = true;
				 this.E504_40.text = ve504.e50440;
				 this.E504_41.text = ve504.e50441;
				 this.E504_42.text = ve504.e50442;
				 this.E504_40.enabled = true;
				 this.E504_41.enabled = true;
				 this.E504_42.enabled = true;
			 }
			}
			private function loadE504_45():void{
				if(ve504.e50445=="0"){
					this.E504_45_1.selected = false;
					this.E504_46.text = "原因描述：";
				}else if(ve504.e50445=="1"){
					this.E504_45_1.selected = true;
					this.E504_46.text = ve504.e50446;
					this.E504_46.enabled = true;
					this.E504_47.enabled = true;
					setSplitVal([E504_47_1,E504_47_2],ve504.e50447);
				}
			}
			
			/**
			 *
			 */
			private function setSplitVal(idArr:Array,val:String):void
			{
				var resultVal:Array=val.split(',');
				for(var i:int=0;i<idArr.length;i++)
				{	
					idArr[i].text=resultVal[i]?resultVal[i]:'';
				}
			}
			
			private function loadE504_19(e50419_:String):void{
				if(e50419_=="1")this.E504_19_01.selected=true;
				if(e50419_=="2")this.E504_19_02.selected=true;
			}
			
			private function loadywAll(val:String,val2:String,griditemId:Object,textinputId:Object,con:String):void{
				if(val=="0"){
					var yes:Object=griditemId.getElementAt(1);//第二个节点'否'
					yes.selected = true;
					textinputId.enabled = false;
					textinputId.text=con;
				}else{
					if(val=="1"){
						var fou:Object=griditemId.getElementAt(2);//第三个节点'是'
						fou.selected = true;
						textinputId.enabled = true;
						textinputId.text=val2;
					}
				}
			}
			
			private function loadyw(val:String,griditemId:Object):void{
				 	var i:int = int(val);
					var obj2:Object;
					var obj:Object;
					if(griditemId==E504_28 || griditemId==E504_50){
						obj2=griditemId.getElementAt(i);
						obj2.selected = true;
					}else{
						obj=griditemId.getElementAt(i+1);
						obj.selected = true;
					}
					
			}
			
			
				
			private function loadE504_51(e504_51:String):void{
				var array:Array = e504_51.split(",");
				var num:int;
				for(var i:int = 0;i<array.length;i++){
					num=int(array[i])
					if(!num){
						continue;
					}
					if(array[i]!="0"){
						var obj:Object = this.CheckBoxHG.getElementAt(int(array[i])-1);
						obj.selected = true;
					}
				}
			}
			/****************选择对应的信息********************/
			private function getDropDownListSelectedIndex(arrayCollection:ArrayCollection, defaultValue:String):int
			{
				var len:uint = arrayCollection.length;
				var i:uint = 0;
				var index:int = 0;
				var comboBoxDataP:Object =new Object();
				while(i < len) {
					comboBoxDataP= arrayCollection.getItemAt(i);
					if(comboBoxDataP.data == defaultValue) {
						index = arrayCollection.getItemIndex(comboBoxDataP);
						break;
					}
					i++;
				}
				return index;
			}
			/*******************验证地址选项是否选择到最下级*****************/
			private function validateAreaCode(areaCode:String):Boolean
			{
				if(areaCode == "" || areaCode.length == 0){
					return false;
				} else if(areaCode.length < 9){
					return false;
				} else if(areaCode.length == 9){
					if(areaCode.substr(0,4) == "4113"){
						return false;
					} else {
						return true;
					}
				} else {
					return true;
				}
			}
			private function saveE504():void{
				var patternMonther:RegExp = /^(\d{18,18}|\d{15,15}|\d{17,17}X|\d{17,17}x)$/g;
				if(this.E504_15.selectedItem.data==0){
					Alert.show("请选择婴儿性别","系统提示");
					return;
				}
				var tz:Number = Number(StringUtil.trim(this.E504_16.text));
				var sg:Number = Number(StringUtil.trim(this.E504_17.text));
				if(isNaN(tz)){
					Alert.show("出生体重数字无效，请从新输入！","系统提示");
					return;
				}
				
				if(tz>9.999 || tz<0.3){
					Alert.show("出生体重应在0.3~9.999kg之间","系统提示");
					return;
				}
				
				if(isNaN(sg)){
					Alert.show("出生身长为无效数字，请从新输入！","系统提示");
					return;
				}
				
				if(sg>100 ||sg<10){
					Alert.show("出生身高应在10~100cm之间","系统提示");
					return;
				}
				
				if(this.E504_12.text==""){
					Alert.show("请输入出生医院","系统提示");
					return;
				}
				if(this.E504_14.text == ""){
					Alert.show("请选择出生日期","系统提示");
					return;
				}
				if(this.E504_06.text == ""){
					Alert.show("请输入母亲姓名","系统提示");
					return;
				}
				if(this.E504_10.text == ""){
					Alert.show("请输入联系电话","系统提示");
					return;
				}
				if(this.E504_07.text == ""){
					Alert.show("请输入身份证号","系统提示");
					return;
				}
				if(!patternMonther.test(StringUtil.trim(E504_07.text)))
				{
					Alert.show("身份证号码有误!","系统提示");
					return;
				}
				if(this.E504_08.text == ""){
					Alert.show("请输入身份地址","系统提示");
					return;
				}
				if(E504_09.getAreaCode().substr(0,4)!="4113")
				{
					Alert.show("请选择南阳市地址","系统提示");
					return ;
				}
				
				if(!CompMethod.validateAreaCode(E504_09.getAreaCode(),'4113'))
				{
					Alert.show("现地址选择到最下级","系统提示");
					return ;
				}
				
				if(!CompMethod.validateAreaCode(E504_61.getAreaCode(),"4113",true))
				{
					Alert.show("户口地址请选择到乡镇","系统提示");
					return ;
				}
				if(this.E504_18.selectedItem.data==0){
					Alert.show("请选择分娩方式","系统提示");
					return;
				}
				if(this.E504_23.selectedItem.data==0){
					Alert.show("请选择胎数","系统提示");
					return;
				}
				
				if(E504_48_0.selected)
				{
					if(!E504_49_1.text)
					{
						Alert.show("请输入呼吸机使用天数！","系统提示");
						return;
					}
					if(!E504_49_2.text)
					{
						Alert.show("请输入呼吸机使用小时！","系统提示");
						return;
					}
				}
				
				if(E504_45_1.selected)
				{
					if(!E504_46.text)
					{
						Alert.show("请输入使NICU抢救原因！","系统提示");
						return;
					}
					
					if(!E504_47_1.text)
					{
						Alert.show("请输入使NICU抢救持续天数！","系统提示");
						return;
					}
					if(!E504_47_2.text)
					{
						Alert.show("请输入NICU抢救持续小时！","系统提示");
						return;
					}
				}
				
				if(StringUtil.trim(this.E504_56.text) == ""){
					Alert.show("请输入检查人员","系统提示");
					return;
				}
				
				if(StringUtil.trim(this.E504_58.text) == ""){
					Alert.show("请输入录入人员","系统提示");
					return;
				}
				saveE504_();
			}
			private function saveE504_():void{
				e504.e50401 = ve504.e50401;
				e504.e50402 = ve504.e50402;
				e504.e50403 = ve504.e50403;
				e504.e50404 = ve504.e50404;
				e504.e50405 = StringUtil.trim(this.E504_05.text);
				e504.e50406 = StringUtil.trim(this.E504_06.text);
				e504.e50407 = StringUtil.trim(this.E504_07.text);
				e504.e50408 = StringUtil.trim(this.E504_08.text);
				e504.e50409 = this.E504_09.getAreaCode();
				e504.e50410 = StringUtil.trim(this.E504_10.text);
				e504.e50411 = StringUtil.trim(this.E504_11.text);
				e504.e50412 = StringUtil.trim(this.E504_12.text);
				e504.e50413 = this.E504_13.selectedItem.data;
				e504.e50414 = DateField.stringToDate(this.E504_14.text,'YYYY-MM-DD');
				e504.e50415 = this.E504_15.selectedItem.data;
				e504.e50416 = Number(StringUtil.trim(this.E504_16.text));
				e504.e50417 = Number(StringUtil.trim(this.E504_17.text));
				e504.e50418 = this.E504_18.selectedItem.data;
				setE504_19();
				e504.e50420 = Number(StringUtil.trim(this.E504_20.text));
				e504.e50421 = Number(StringUtil.trim(this.E504_21.text));
				e504.e50422 = Number(StringUtil.trim(this.E504_22.text));
				e504.e50423 = this.E504_23.selectedItem.data;
				e504.e50424 = getRadioButtonValue(this.E504_24);
				
				if(getRadioButtonValue(this.E504_24)=="0"){
					e504.e50425 = "";
				}else e504.e50425 = StringUtil.trim(this.E504_25.text);
				
				e504.e50426 = getRadioButtonValue(this.E504_26);
				e504.e50427 = getRadioButtonValue(this.E504_27);
				e504.e50428 = getRadioButtonValue(this.E504_28);
				e504.e50429 = getRadioButtonValue(this.E504_29);
				
				if(getRadioButtonValue(this.E504_29)=="0"){
					e504.e50430 = "";
				}else e504.e50430 = StringUtil.trim(this.E504_30.text);
				
				e504.e50431 = getRadioButtonValue(this.E504_31);
				if(getRadioButtonValue(this.E504_31)=="0"){
					e504.e50432 = "";
				}else e504.e50432 = StringUtil.trim(this.E504_32.text);
				
				e504.e50433 = getRadioButtonValue(this.E504_33);
				if(getRadioButtonValue(this.E504_33)=="0"){
					e504.e50434 = "";
				}else e504.e50434 = StringUtil.trim(this.E504_34.text);
				
				e504.e50435 = getRadioButtonValue(this.E504_35);
				
				if(getRadioButtonValue(this.E504_35)=="0"){
					e504.e50436 = "";
				}else e504.e50436 = StringUtil.trim(this.E504_36.text);
				
				e504.e50437 = getRadioButtonValue(this.E504_37);
				
				if(getRadioButtonValue(this.E504_37)=="0"){
					e504.e50438 = "";
				}else e504.e50438 = StringUtil.trim(this.E504_38.text);
				//clickE504_39();
				/* this.e504.e50440 = this.E504_40.text;
				this.e504.e50441 = this.E504_41.text;
				this.e504.e50442 = this.E504_42.text; */
				if(E504_39_0.selected){
					e504.e50439="0";
					e504.e50440="";
					e504.e50441="";
					e504.e50442="";
				}else{
					if(E504_39_1.selected){
						e504.e50439="1";
						e504.e50440=this.E504_40.text;
						e504.e50441=this.E504_41.text;
						e504.e50442=this.E504_42.text;
					}
				}
				e504.e50443 = getRadioButtonValue(this.E504_43);
				
				if(getRadioButtonValue(this.E504_43)=="0"){
					e504.e50444 = "";
				}else e504.e50444 = StringUtil.trim(this.E504_44.text);
				
				if(this.E504_45_0.selected){
					e504.e50445="0";
					this.e504.e50446="";
					this.e504.e50447="";
				}else{
					if(this.E504_45_1.selected){
						e504.e50445="1";
						this.e504.e50446 = this.E504_46.text;
						this.e504.e50447 = E504_47_1.text+','+E504_47_2.text;
					}
				}
				e504.e50448 = getRadioButtonValue(this.E504_48);
				
				if(getRadioButtonValue(this.E504_48)=="0"){
					e504.e50449 = "";
				}else e504.e50449 = E504_49_1.text+','+E504_49_2.text;
				
				e504.e50450 = getRadioButtonValue(this.E504_50);
				//e504.e50451 = this.E504_51.selectedItem.data;
				sete504();
				e504.e50452 = getRadioButtonValue(this.E504_52);
				e504.e50453 = this.E504_53.selectedItem.data;
				e504.e50454 = getRadioButtonValue(this.E504_54);
				e504.e50455 = this.E504_55.selectedItem.data;
				e504.e50456 = StringUtil.trim(this.E504_56.text);
				e504.e50457 = this.E504_57.selectedItem.data;
				e504.e50458 = StringUtil.trim(this.E504_58.text);
				e504.e50459 = DateField.stringToDate(this.E504_59.text,'YYYY-MM-DD');
				e504.e50460 = new Date();
				e504.e50461 = this.E504_61.getAreaCode();
				e504.e50462 = ve504.e50462;
				e504.e50499 ="3";
				this.e504Service.renewE504(e504);
			}
			
			private function sete504():void{
				e504.e50451="";
				var intCheck:int = this.CheckBoxHG.numElements;
				for(var i:int=0;i<intCheck;i++){
					var obj:Object = this.CheckBoxHG.getElementAt(i);
					if(obj.selected){
						e504.e50451 += i+1+",";
					}else{
						e504.e50451 += "0,";
					}
				}
			}
			
			private function setE504_19():void{
				var array:Array = new Array();
				if(this.E504_19_01.selected){
					array[901] = '1';
					e504.e50419=array[901];
				}
				else if(this.E504_19_02.selected){
					array[902] = '2';
					e504.e50419 = array[902];
				}
			}
			
			private function getRadioButtonValue(id:Object):String{
				var value:String;
				var radioButton:RadioButton;
				for(var i:int=1;i<id.numElements;i++){
					radioButton = id.getElementAt(i) as RadioButton;
					if(radioButton.selected){
						value=radioButton.value.toString();
					}
				}
				return value;
			}
			
			private function setE504_51():void{
				e504.e50451="";
				var intCheck:int = this.CheckBoxHG.numElements;
				for(var i:int=0;i<intCheck;i++){
					var obj:Object = this.CheckBoxHG.getElementAt(i);
					if(obj.selected){
						e504.e50451 += i+1+",";
					}else{
						e504.e50451 += "0,";
					}
				}
			}
			private function renewE504Handler(event:ResultEvent):void{
				var E504obj:Object = event.result;
				if(E504obj.errorMessage!=null){
					Alert.show(E504obj.errorMessage,"系统提示");
					return;
				}
				Alert.show("修改成功！","系统提示",1,this,closeHandler);
				
			}
			
			private function closeHandler(event:CloseEvent):void
			{
				var ref:Object = this.owner;
				ref.refresh();
				close();
			}
			
			private function close():void{
				PopUpManager.removePopUp(this);
			}
			
			private function E504_61clickHandler(event:MouseEvent):void{
				if(!CompMethod.validateAreaCode(E504_09.getAreaCode(),"4113"))
				{
					Alert.show("现住址选择到最下级才能使用此功能","系统提示");
					return ;
				}
				E504_61.setAreaCode(E504_09.getAreaCode());
			}
			
			private function clickAll(gridItemId:Object,textInputId:Object,text:String=""):void{
				if(text==""){
					var yes:Object=gridItemId.getElementAt(2);//得到'是'节点
					if(yes.selected){
						textInputId.enabled = true;
						textInputId.text="";
					}
				}else{
					var fou:Object=gridItemId.getElementAt(1);//得到'否'节点
					if(fou.selected){
						textInputId.enabled = false;
						textInputId.text = text;
					}
				}
			}
			
			private function clickE504_39_0():void{
				this.E504_40.enabled = false;
				this.E504_41.enabled = false;
				this.E504_42.enabled = false;
				this.E504_40.text = "药名：";
				this.E504_41.text = "剂量：";
				this.E504_42.text = "疗程：";
			}
			
			private function clickE504_39_1():void{
				this.E504_40.enabled = true;
				this.E504_41.enabled = true;
				this.E504_42.enabled = true;
				this.E504_40.text="";
				this.E504_41.text="";
				this.E504_42.text="";
			}
			
		
		]]>
	</fx:Script>
	<s:Scroller width="100%" height="100%" horizontalScrollPolicy="auto" verticalScrollPolicy="auto" chromeColor="#cccccc">
		<s:VGroup horizontalAlign="center">
			<mx:TabNavigator width="1198" chromeColor="#ffffff" creationPolicy="all">
				<s:NavigatorContent width="1200" label="基本信息">
					<s:VGroup paddingBottom="10" paddingLeft="10" paddingRight="10">
						<mx:Grid>
							<mx:GridRow width="1058">
								<mx:GridItem>
									<s:Label width="80" text="母亲姓名"/><s:TextInput id="E504_06"
																				  width="130"
																				  restrict="^0-9"/>	<s:Label styleName="must" text="*"/>
									<s:Label text="身份证号" width="59"/><s:TextInput id="E504_07" width="130" restrict="0-9X"/>
									<s:Label styleName="must" text="*"/>
									<s:Label width="69" text="身份证地址"/><s:TextInput width="383" id="E504_08"/><s:Label styleName="must" text="*"/>
									<s:Label  text="联系电话 "  width="78"/><s:TextInput id="E504_10" restrict="0-9"/><s:Label styleName="must" text="*"/>
									<!--<s:Button id="readCard1" width="60" label="读卡" buttonMode="true"
									enabled="{systemUser.duka=='1'}" color="red"/>-->
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem>
									<s:HGroup width="100%" paddingBottom="5" paddingRight="10"
											  verticalAlign="middle">
										<s:Label width="81" text="婴儿姓名"/><s:TextInput id="E504_05" width="130"
																					  restrict="^0-9"/>
										<s:Label width="79"  text="婴儿性别" paddingLeft="17"/><s:DropDownList id="E504_15" width="130" buttonMode="true"/><s:Label styleName="must" text="*"/>
										<s:Label width="76" text="出生日期" paddingLeft="5"/>
									
										<component:CustomRangeDateField  id="E504_14" width="130" />
										<s:Label styleName="must" text="*"/>
										<s:Label width="99" text="出 生 体 重(kg)"/><s:TextInput id="E504_16" width="130"  restrict="0-9." maxChars="4"/><s:Label styleName="must" text="*"/>
										<s:Label width="83" text="出生身长(cm)" paddingLeft="5"/><s:TextInput id="E504_17" width="130"  restrict="0-9." maxChars="4"/><s:Label styleName="must" text="*"/>
									</s:HGroup>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem>
									<s:HGroup width="100%" paddingBottom="5" paddingRight="10"
											  verticalAlign="middle">
										<s:Label width="81" text="出生医院"/><!--<s:DropDownList id="E504_12" width="130"/>-->
										<s:TextInput width="130" id="E504_12"/>
										<s:Label styleName="must" text="*"/>
										<s:Label width="65" text="住院号" paddingLeft="5"/><s:TextInput width="124" id="E504_11"/>
										<s:Label width="96" text="户籍类型" paddingLeft="22"/><s:DropDownList id="E504_13" width="130"/>
										<s:Label width="114" text="分 娩 方 式" paddingLeft="15"/><s:DropDownList id="E504_18" width="124"/><s:Label styleName="must" text="*"/>
										<s:Label width="88" text="孕      周" paddingLeft="10"/>
										<s:BorderContainer width="130" height="23">
											<s:HGroup verticalAlign="middle">
												<s:TextInput id="E504_20" width="40" borderVisible="false" maxChars="2" textAlign="right" restrict="0-9"/>
												<s:Label text="周    "/>
												<s:TextInput id="E504_21" width="42" borderVisible="false" maxChars="1" textAlign="right"  restrict="0-6"/>
												<s:Label text="天    "/>
											</s:HGroup>
										</s:BorderContainer>
									</s:HGroup>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem colSpan="3">
									<s:HGroup width="100%" paddingBottom="5" paddingRight="10" verticalAlign="middle">
										<s:Label width="81" text="胎       数"/><s:DropDownList id="E504_23" width="130"/><s:Label width="12"
																																 styleName="must"
																																 text="*"/>
										<s:Label width="62" paddingLeft="5" text="产    次"/><s:TextInput id="E504_22" width="124" restrict="0-9"/>
										<s:Label width="95" text="付费方式 " paddingLeft="22"/><!--<s:DropDownList id="E504_19" width="124"/>-->
										<s:RadioButton id="E504_19_01" width="50" label="免费"
													   value="1" selected="true"/>
										<s:RadioButton label="自费" id="E504_19_02" value="2"/>
									</s:HGroup>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem colSpan="3">
									<s:Label width="59" text="现住址"/>
									<component:AreaComboBoxVillageAuto id="E504_09" width="785" enabled="false"
																	   buttonMode="true" table="D201_MS" 
																	   areaCode="{this.parentApplication.systemUser.areaCode} "
																	   creationComplete="this.E504_09.setAreaCode(ve504.e50409)"/>
									
									<s:Label styleName="must" text="*"/>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem>
									<s:Label width="59" text="户口地址"/>
									<component:AreaComboBoxVillageAuto id="E504_61" width="785"
																	   buttonMode="true" table="D201_MS"
																	   areaCode="{this.parentApplication.systemUser.areaCode}"
																	   creationComplete="this.E504_61.setAreaCode(ve504.e50461);"/>
									<s:Label styleName="must" text="*"/>
									<s:Button label="同现住址" click="E504_61clickHandler(event)" buttonMode="true"/>
								</mx:GridItem>
							</mx:GridRow>
						</mx:Grid>
					</s:VGroup>
				</s:NavigatorContent>
			</mx:TabNavigator>
			<mx:TabNavigator width="1198" chromeColor="#ffffff" creationPolicy="all">
				<s:NavigatorContent width="1140" label="检查信息">
					<s:VGroup paddingBottom="10" paddingLeft="10" paddingRight="10">
						<mx:Grid>
							<mx:GridRow>
								<mx:GridItem id="E504_24">
									<s:Label width="83" text="婴儿缺陷"/><!--<s:DropDownList id="E504_24" width="124"/>-->
									<s:RadioButton width="50" label="无" click="clickAll(E504_24,E504_25,'缺陷描述：')"
												   groupName="E504_24" selected="true" value="0"/>
									<s:RadioButton  label="有" value="1" groupName="E504_24" click="clickAll(E504_24,E504_25)"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:TextInput id="E504_25" width="200" text="缺陷描述：" enabled="false"/>
								</mx:GridItem>
								<mx:GridItem id="E504_29">
									<s:Label width="69" text="异 常 分 娩"/><!--<s:DropDownList id="E504_29" width="124"/>-->
									<s:RadioButton width="50" label="无" click="clickAll(E504_29,E504_30,'异常描述：')"
												   groupName="E504_29" selected="true" value="0"/>
									<s:RadioButton  label="有" value="1" groupName="E504_29" click="clickAll(E504_29,E504_30)"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:TextInput id="E504_30" width="200" text="异常描述：" enabled="false"/>
								</mx:GridItem>
								<mx:GridItem id="E504_27">
									<s:Label y="2" width="52" height="17" text="产    伤"/><!--<s:DropDownList id="E504_27" width="124"/>-->
									<s:RadioButton width="29" label="无" groupName="E504_27"
												   selected="true" value="0"/>
									<s:RadioButton   label="有" value="1" groupName="E504_27"/>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem id="E504_31">
									<s:Label width="83" text="五官畸形"/><!--<s:DropDownList id="E504_31" width="124"/>-->
									<s:RadioButton width="50" label="无" click="clickAll(E504_31,E504_32,'畸形描述：')"
												   groupName="E504_31" selected="true" value="0"/>
									<s:RadioButton  label="有" value="1" groupName="E504_31" click="clickAll(E504_31,E504_32)"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:TextInput id="E504_32" width="200" enabled="false" text="畸形描述："/>
								</mx:GridItem>
								<mx:GridItem id="E504_33">
									<s:Label width="69" text="出生后患病"/><!--<s:DropDownList id="E504_33" width="124"/>-->
									<s:RadioButton width="48" label="无" click="clickAll(E504_33,E504_34,'患病描述：')"
												   groupName="E504_33" selected="true" value="0"/>
									<s:RadioButton  label="有" value="1" groupName="E504_33" click="clickAll(E504_33,E504_34)"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:TextInput id="E504_34" width="200" text="患病描述：" enabled="false"/>
								</mx:GridItem>
								<mx:GridItem id="E504_28">
									<s:Label width="52" text="羊    水"/><!--<s:DropDownList id="E504_28" width="124"/>-->
									<s:RadioButton  label="清" value="1" groupName="E504_28"/>
									<s:RadioButton  label="I°浑浊" value="2" selected="true" groupName="E504_28"/>
									<s:RadioButton  label="Ⅱ°浑浊" value="3" groupName="E504_28"/>
									<s:RadioButton  label="Ⅲ°浑浊" value="4" groupName="E504_28"/>
									<s:RadioButton  label="血性" value="5" groupName="E504_28"/>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<!--<mx:GridItem>
								<s:Label width="73" text="胎儿窘迫" paddingLeft="8"/><s:DropDownList id="E504_26" width="124"/>
								</mx:GridItem>-->
								
								<mx:GridItem id="E504_35">
									<s:Label text="出生感染" width="83"/><!--<s:DropDownList id="E504_35" width="124"/>-->
									<s:RadioButton width="50" label="无" click="clickAll(E504_35,E504_36,'感染描述：')"
												   groupName="E504_35" selected="true" value="0"/>
									<s:RadioButton  label="有" value="1"  groupName="E504_35" click="clickAll(E504_35,E504_36)"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:TextInput id="E504_36" width="200" text="感染描述：" enabled="false"/>
								</mx:GridItem>
								<mx:GridItem id="E504_37">
									<s:Label width="69" text="头部外伤史"/><!--<s:DropDownList id="E504_37" width="124"/>-->
									<s:RadioButton width="48" label="无" click="clickAll(E504_37,E504_38,'外伤描述：')"
												   groupName="E504_37" selected="true" value="0"/>
									<s:RadioButton   label="有" value="1" groupName="E504_37" click="clickAll(E504_37,E504_38)"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:TextInput id="E504_38" width="200" text="外伤描述：" enabled="false"/>
								</mx:GridItem>
								<mx:GridItem id="E504_26">
									<s:Label  text="胎儿窘迫"/><!--<s:DropDownList id="E504_26" width="124"/>-->
									<s:RadioButton  label="无" value="0" groupName="E504_26" selected="true"/>
									<s:RadioButton  label="有" value="1" groupName="E504_26"/>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem>
									<s:Label width="83" text="耳毒性药&#xd;物应用史"/><!--<s:DropDownList id="E504_39" width="124"/>-->
									<s:RadioButton width="50" label="无" click="clickE504_39_0()" groupName="E504_39"
												   id="E504_39_0" selected="true"/>
									<s:RadioButton   label="有" id="E504_39_1" click="clickE504_39_1()"  groupName="E504_39"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label width="28" text="药名" /><s:TextInput id="E504_40" width="160" enabled="false" text="药名："/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label width="55" text="剂       量" /><s:TextInput id="E504_41" width="128" enabled="false" text="剂量："/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label width="55" text="疗      程" /><s:TextInput id="E504_42" width="130" enabled="false" text="疗程："/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label text="家庭不良&#13;生活习惯"/>
									<s:HGroup verticalAlign="middle" id="CheckBoxHG" gap="10">
										<s:CheckBox  label="无"/>
										<s:CheckBox  label="吸烟"/>
										<s:CheckBox  label="吸毒"/>
										<s:CheckBox width="50" label="饮酒"/>
									</s:HGroup>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem id="E504_43">
									<s:Label width="83" text="中耳炎史"/><!--<s:DropDownList id="E504_43" width="124"/>-->
									<s:RadioButton width="50" label="无" click="clickAll(E504_43,E504_44,'中耳炎描述：')"
												   groupName="E504_43" selected="true" value="0"/>
									<s:RadioButton   label="有" value="1" groupName="E504_43" click="clickAll(E504_43,E504_44)"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:TextInput id="E504_44" width="200" text="中耳炎描述：" enabled="false"/>
								</mx:GridItem>
								<mx:GridItem id="E504_48">
									<s:Label width="69" text="呼吸机使用"/><!--<s:DropDownList id="E504_48" width="124"/>-->
									<s:RadioButton  label="无" value="0" groupName="E504_48" selected="true" 
													change="CompMethod._walk(E504_49)"/>
									<s:RadioButton  label="有" value="1" groupName="E504_48" id="E504_48_0"/>
								</mx:GridItem>
								
									<mx:GridItem>
										<s:Label width="55" enabled="false" text="持续时间"/>
										
										<s:BorderContainer width="130" height="23" id="E504_49" enabled="{E504_48_0.selected}">
											<s:HGroup verticalAlign="middle">
												<s:TextInput id="E504_49_1" width="41" borderVisible="false" maxChars="2" textAlign="right" restrict="0-9"/>
												<s:Label paddingRight="0" text="天"/>
												<s:TextInput id="E504_49_2" width="25" borderVisible="false" maxChars="2" textAlign="right"  restrict="0-9"/>
												<s:Label paddingRight="0" text="小时"/>
											</s:HGroup>
										</s:BorderContainer>
										<!--								<s:TextInput id="E504_49" width="130" enabled="false" text="持续时间："/>
									-->	
								</mx:GridItem>
								<mx:GridItem id="E504_52">
									<s:Label width="54" text="家中有无&#xd;耳聋患者 "/><!--<s:DropDownList id="E504_52" width="124"/>-->
									<s:RadioButton  label="无" value="0" groupName="E504_52" selected="true"/>
									<s:RadioButton  label="有" value="1" groupName="E504_52"/>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem>
									<s:Label width="83" text="NICU抢救"/><!--<s:DropDownList id="E504_45" width="124"/>-->
									<s:RadioButton width="51" label="无"  groupName="E504_45"
												   change="E504_46.text = '原因描述：';CompMethod._walk(E504_47)"
												   id="E504_45_0" selected="true" />
									<s:RadioButton   label="有"   id="E504_45_1" change="E504_46.text =''" groupName="E504_45"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label  width="28"  text="原因"/>
									<s:TextInput id="E504_46" width="160" enabled="{E504_45_1.selected}" text="原因描述："/>
								</mx:GridItem>
								
								<mx:GridItem>
									<s:Label width="55" text="持续时间"/>
									<s:BorderContainer width="127" height="23" id="E504_47" enabled="{E504_45_1.selected}">
										<s:HGroup verticalAlign="middle">
											<s:TextInput id="E504_47_1" width="41" borderVisible="false" maxChars="2" textAlign="right" restrict="0-9"/>
											<s:Label paddingRight="0" text="天"/>
											<s:TextInput id="E504_47_2" width="25" borderVisible="false" maxChars="2" textAlign="right"  restrict="0-9"/>
											<s:Label paddingRight="0" text="小时"/>
										</s:HGroup>
									</s:BorderContainer>
									<!--	<s:TextInput id="E504_47" width="124" enabled="false" text="持续时间："/>-->
								</mx:GridItem>
								<mx:GridItem id="E504_50">
									<s:Label text="感官刺激&#xd;反应"/><!--<s:DropDownList id="E504_50" width="124"/>-->
									<s:RadioButton  value="1" label="灵敏" selected="true" groupName="E504_50"/>
									<s:RadioButton  value="2" label="迟钝" groupName="E504_50"/>
								</mx:GridItem>
								<mx:GridItem id="E504_54">
									<s:Label width="54" text="父母是否&#xd;近亲结婚"/><!--<s:DropDownList id="E504_54" width="124"/>-->
									<s:RadioButton  label="无" value="0" groupName="E504_54" selected="true"/>
									<s:RadioButton  label="有" value="1" groupName="E504_54"/>
								</mx:GridItem>
							</mx:GridRow>
							<mx:GridRow>
								<mx:GridItem>
									<s:Label width="82" text="与新生儿关系 "/><s:DropDownList id="E504_53" width="130"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label width="57" text="血缘关系"/><s:DropDownList id="E504_55" width="130"/>
								</mx:GridItem>
							</mx:GridRow>
						</mx:Grid>
					</s:VGroup>
				</s:NavigatorContent>
			</mx:TabNavigator>
			<mx:TabNavigator chromeColor="#ffffff" creationPolicy="all">
				<s:NavigatorContent width="1198" label="报告信息">
					<s:VGroup paddingBottom="10" paddingLeft="10" paddingRight="10">
						<mx:Grid>
							<mx:GridRow>
								<mx:GridItem>
									<s:Label text="检查医生" paddingLeft="8"/><!--<component:FindSelectedItemComboBox editable="true" height="21"  width="120" id="E504_56"/>-->
									<s:TextInput id="E504_56" width="120"/>		
									<s:Label styleName="must" text="*"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label text="单位名称"/><s:DropDownList id="E504_57" width="124" enabled="false"/><s:Label styleName="must" text="*"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label text="录入人员"/><!--<component:FindSelectedItemComboBox editable="true" height="21" width="120" id="E504_58"/>-->
									<s:TextInput id="E504_58" width="120"/><s:Label styleName="must" text="*"/>
								</mx:GridItem>
								<mx:GridItem>
									<s:Label text="录入时间"/>
									<component:CustomRangeDateField isSelectNow="true"  id="E504_59" enabled="false" width="130" />
									<s:Label styleName="must" text="*"/>
								</mx:GridItem>
							</mx:GridRow>
						</mx:Grid>
					</s:VGroup>
				</s:NavigatorContent>
			</mx:TabNavigator>
			<s:HGroup width="100%" height="30" contentBackgroundColor="#FF0000"
					  horizontalAlign="center" paddingBottom="20" paddingLeft="10" paddingTop="10"
					  verticalAlign="middle">
				<s:Button id="save" label="保存" buttonMode="true" click="saveE504()"/>
			</s:HGroup>
		</s:VGroup>
	</s:Scroller>
</s:TitleWindow>
