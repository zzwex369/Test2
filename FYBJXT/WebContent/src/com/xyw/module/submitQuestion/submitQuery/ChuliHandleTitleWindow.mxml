<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" 
			   xmlns:component = "com.xyw.sys.custom.component.*"
			   xmlns:skin = "com.xyw.sys.custom.skin.*"
			   title="处理信息" backgroundColor="white"
			   chromeColor="#5CACEE" close = "removeWindow()" cornerRadius="5"
			   width="718" height="580" 
			   skinClass="com.xyw.sys.custom.skin.CustomTitleWindow"
			   creationComplete="init(event)">
	
	<fx:Declarations>
		<s:RemoteObject id="governmentService" destination="governmentService" endpoint="{this.parentApplication.contextRoot}/messagebroker/amf" showBusyCursor="true">
			<s:method name="chuliupdateD402" result="chuliupdateD402Handle(event)"/>
		</s:RemoteObject>
	</fx:Declarations>
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		.gridItem
		{
			horizontalAlign:left;
			verticalAlign:middle;
		}
	</fx:Style>
	<fx:Script>
		<![CDATA[
			import com.xyw.module.submitQuestion.model.D402;
			import com.xyw.module.submitQuestion.model.VD402;
			import com.xyw.module.submitQuestion.model.D402Request;
			import com.xyw.sys.model.ComboBoxData;
			import com.xyw.sys.model.ComboBoxDataRequest;
			import com.xyw.sys.model.ComboBoxDataResponse;
			import com.xyw.sys.model.SystemUser;
			import mx.formatters.DateFormatter;
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			import mx.events.ValidationResultEvent;
			import mx.managers.PopUpManager;
			import mx.rpc.events.ResultEvent;
			import mx.utils.StringUtil;
			import mx.validators.Validator;
			import mx.events.CloseEvent;
			import spark.events.TextOperationEvent;
			public var systemUser:SystemUser = null;
			public var vd402:VD402 = null;
		
			
			protected function init(event:FlexEvent):void
			{
				this.d402_02.text = vd402.d40202;
				this.d402_03.text = vd402.d40203;
				this.d402_04.text = vd402.d40204;
				this.d402_05.text = vd402.d40205;
				this.d402_06.text = vd402.d40206;
				this.d402_07.text = vd402.d40207;
				this.d402_08.text = vd402.d40208;
				this.d402_09.text = vd402.d40209;
				this.d402_10.text = vd402.d40210Zh;
				this.d402_11.text = vd402.d40211Zh;
				this.d402_15.text = vd402.d40215;
				this.d402_14.text = vd402.d40214;
				this.d402_20.text = vd402.d40220Zh;
				//this.d402_12.text = vd402.d40212;
				
				var fr:DateFormatter = new DateFormatter;
				fr.formatString = "YYYY-MM-DD";
				this.d402_12.text = fr.format(vd402.d40212);
				
			}
			protected function chuli(event:MouseEvent):void
			{
				if(d402_16.text == ""){
					Alert.show("处理人姓名不能为空！","系统提示");
					return;
				}
				if(d402_17.text == ""){
					Alert.show("处理信息描述不能为空！","系统提示");
					return;
				}
				Alert.yesLabel = "确定";
				Alert.noLabel = "取消";
				Alert.show('确认处理？','处理信息',1|2,this,updateD402A);
			}
			
			protected function updateD402A(event:CloseEvent):void
			{
				if(event.detail == Alert.YES){
					var d402:D402 = new D402();
					var d402Request:D402Request = new D402Request();
					
					d402.d402_01 = this.vd402.d40201;
				    d402.d402_16 = d402_16.text;
					d402.d402_17 = d402_17.text;
					var date:Date = new Date();
					d402.d402_18 = date;
					d402Request.d402 = d402;
					this.governmentService.chuliupdateD402(d402Request);
				}
			}
			private function chuliupdateD402Handle(event:ResultEvent):void{
				var d402Response:Object = event.result;
				if(d402Response.errorMessage != null){
					Alert.show(d402Response.errorMessage);
				}else{
					Alert.show(d402Response.promptMessage);
				}
				PopUpManager.removePopUp(this);
			}
			private function removeWindow():void
			{ 
				PopUpManager.removePopUp(this);
			}		
			
		]]>
	</fx:Script>
	
	<s:VGroup width="100%" x="15">
		<s:HGroup width="100%" height="554" paddingLeft="10" paddingTop="10">
			<s:VGroup width="100%" height="533" paddingBottom="10" paddingLeft="10" paddingRight="10">
				<mx:TabNavigator width="100%" height="179" chromeColor="#ffffff" creationPolicy="all">
					<s:NavigatorContent  label="基本信息" width="100%">
						<s:VGroup width="100%" paddingBottom="5">
							<mx:Grid width="100%">
								<mx:GridRow>
									<mx:GridItem styleName="gridItem">
										<s:Label text="婴 儿 姓 名"/><s:TextInput id="d402_02" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="出  生  证  号"/><s:TextInput id="d402_03" width="150" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="申请人姓名"/><s:TextInput id="d402_15" enabled="false"/>
									</mx:GridItem>
								</mx:GridRow>
								<mx:GridRow>
									<mx:GridItem styleName="gridItem">
										<s:Label text="母 亲 姓 名"/><s:TextInput id="d402_04" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="母亲身份证号"/><s:TextInput id="d402_05" width="150" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="申请人电话"/><s:TextInput id="d402_14" enabled="false"/>
									</mx:GridItem>
								</mx:GridRow>
								<mx:GridRow>
									<mx:GridItem styleName="gridItem">
										<s:Label text="父 亲 姓 名"/><s:TextInput id="d402_06" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="父亲身份证号"/><s:TextInput id="d402_07" width="150" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="申 请 时 间"/><s:TextInput id="d402_12" enabled="false"/>
									</mx:GridItem>
								</mx:GridRow>
								<mx:GridRow>
									<mx:GridItem styleName="gridItem">
										<s:Label text="打 印 标 志"/><s:TextInput id="d402_20" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="审  核  标  志"/><s:TextInput id="d402_10" width="150" enabled="false"/>
									</mx:GridItem>
									<mx:GridItem styleName="gridItem">
										<s:Label text="申 请 医 院"/><s:TextInput id="d402_11" enabled="false"/>
									</mx:GridItem>
								</mx:GridRow>
								<mx:GridRow>
									<mx:GridItem styleName="gridItem">
										<s:Label text="处理人姓名"/><s:TextInput id="d402_16" />
									</mx:GridItem>
								</mx:GridRow>	
							</mx:Grid>
						</s:VGroup>
					</s:NavigatorContent>
				</mx:TabNavigator>
				<mx:TabNavigator chromeColor="#ffffff" creationPolicy="all" width="100%" height="105">
					<s:NavigatorContent label="修改信息描述" width="100%">
						<s:TextArea id="d402_17" width="100%" height="71"/>
					</s:NavigatorContent>
				</mx:TabNavigator>
				<mx:TabNavigator chromeColor="#ffffff" creationPolicy="all" width="100%" height="101">
					<s:NavigatorContent label="错误信息描述" width="100%">
						<s:TextArea id="d402_08" width="100%" height="68" enabled="false"/>
					</s:NavigatorContent>
				</mx:TabNavigator>
				<mx:TabNavigator chromeColor="#ffffff" creationPolicy="all" width="100%" height="105">
					<s:NavigatorContent label="修改信息描述" width="100%">
						<s:TextArea id="d402_09" width="100%" height="71" enabled="false"/>
					</s:NavigatorContent>
				</mx:TabNavigator>
				<s:HGroup width="100%" height="24" paddingLeft="500">
					<s:Button id="saveButton" label="处理" click="chuli(event)"/>
					<s:Button label="关闭" click="removeWindow()"/>
				</s:HGroup>
			</s:VGroup>
		</s:HGroup>
	</s:VGroup>
</s:TitleWindow>