<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<configuration>
	<!-- 日志存放路径 -->
	<property name="log.path" value="D:/home/fybjxt/logs" />
	<appender name="console" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			 <charset>UTF-8</charset>
			<pattern>%date %.-5level %class{100} ----------->> %msg%n</pattern>
		</encoder>
	</appender>
 
	<appender name="logfile"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		
		<file>${log.path}/default.log</file>
         <!-- 配置日志所生成的目录以及生成文件名的规则 在logs/mylog-2017-06-31.0.log.zip -->       
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${log.path}.%d{yyyy-MM-dd}.%i.zip</fileNamePattern>
            <!-- 如果按天来回滚，则最大保存时间为30天，30天之前的都将被清理掉 -->
            <maxHistory>30</maxHistory>
            <!-- 日志总保存量为10GB -->
            <totalSizeCap>10 GB</totalSizeCap>
            <timeBasedFileNamingAndTriggeringPolicy
                class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <!--文件达到 最大128MB时会被压缩和切割 -->
                <maxFileSize>128 MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
        </rollingPolicy>
		<encoder>
			 <charset>UTF-8</charset>
			<pattern>%date [%thread] %.-5level %class{25} - %msg%n</pattern>
		</encoder>
	</appender>
 
	<appender name="errorfile"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${log.path}/error.log</file>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">  
		    <level>ERROR</level>  
		    <onMatch>ACCEPT</onMatch>  
		    <onMismatch>DENY</onMismatch>  
		</filter> 
		<!-- 配置日志所生成的目录以及生成文件名的规则 在logs/mylog-2017-06-31.0.log.zip -->       
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${log.path}/error.%d{yyyy-MM-dd}.%i.zip</fileNamePattern>
            <!-- 如果按天来回滚，则最大保存时间为30天，30天之前的都将被清理掉 -->
            <maxHistory>30</maxHistory>
            <!-- 日志总保存量为10GB -->
            <totalSizeCap>10 GB</totalSizeCap>
            <timeBasedFileNamingAndTriggeringPolicy
                class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <!--文件达到 最大128MB时会被压缩和切割 -->
                <maxFileSize>128 MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
        </rollingPolicy>
		<encoder>
			<pattern>%date [%thread] %.-5level %class{25} - %msg%n</pattern>
		</encoder>
	</appender>
 

<!--	-->
<!--	<root level = "Error">//level = "DEBUG"-->
<!--		<appender-ref ref="errorfile" />-->
<!--		<appender-ref ref="console" />-->
<!--	</root>-->
	
	
	<!-- 系统模块日志级别控制  -->
	<logger name="com.xyw" level="info" >
<!--			<appender-ref ref="console" />-->
	 </logger>
	<!-- Spring日志级别控制  -->
	<logger name="org.springframework" level="warn" />

	<root level="error">
		<appender-ref ref="console" />
		<appender-ref ref="errorfile" />
	</root>
	
	<!--系统操作日志-->
    <root level="info">
<!--        <appender-ref ref="logfile" />-->
<!--        <appender-ref ref="errorfile" />-->
<!--        <appender-ref ref="console" />-->
    </root>
	
	<!--系统用户操作日志-->
<!--    <logger name="sys-user" level="info">-->
<!--        <appender-ref ref="sys-user"/>-->
<!--        <appender-ref ref="console" />-->
<!--    </logger>-->
 
</configuration>
